{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js!/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/plugins/Cookies.js","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/plugins/Cookies.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvemhvdXppbG9uZy9EZXNrdG9wLzIwMjAtMDktMTktMDAwNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IGlzU1NSIH0gZnJvbSAnLi9QbGF0Zm9ybS5qcyc7CgpmdW5jdGlvbiBlbmNvZGUoc3RyaW5nKSB7CiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpOwp9CgpmdW5jdGlvbiBkZWNvZGUoc3RyaW5nKSB7CiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHJpbmcpOwp9CgpmdW5jdGlvbiBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSkgewogIHJldHVybiBlbmNvZGUodmFsdWUgPT09IE9iamVjdCh2YWx1ZSkgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiAnJyArIHZhbHVlKTsKfQoKZnVuY3Rpb24gcmVhZChzdHJpbmcpIHsKICBpZiAoc3RyaW5nID09PSAnJykgewogICAgcmV0dXJuIHN0cmluZzsKICB9CgogIGlmIChzdHJpbmcuaW5kZXhPZignIicpID09PSAwKSB7CiAgICAvLyBUaGlzIGlzIGEgcXVvdGVkIGNvb2tpZSBhcyBhY2NvcmRpbmcgdG8gUkZDMjA2OCwgdW5lc2NhcGUuLi4KICAgIHN0cmluZyA9IHN0cmluZy5zbGljZSgxLCAtMSkucmVwbGFjZSgvXFwiL2csICciJykucmVwbGFjZSgvXFxcXC9nLCAnXFwnKTsKICB9IC8vIFJlcGxhY2Ugc2VydmVyLXNpZGUgd3JpdHRlbiBwbHVzZXMgd2l0aCBzcGFjZXMuCiAgLy8gSWYgd2UgY2FuJ3QgZGVjb2RlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS4KICAvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuCgoKICBzdHJpbmcgPSBkZWNvZGUoc3RyaW5nLnJlcGxhY2UoL1wrL2csICcgJykpOwoKICB0cnkgewogICAgc3RyaW5nID0gSlNPTi5wYXJzZShzdHJpbmcpOwogIH0gY2F0Y2ggKGUpIHt9CgogIHJldHVybiBzdHJpbmc7Cn0KCmZ1bmN0aW9uIGdldFN0cmluZyhtc09mZnNldCkgewogIHZhciB0aW1lID0gbmV3IERhdGUoKTsKICB0aW1lLnNldE1pbGxpc2Vjb25kcyh0aW1lLmdldE1pbGxpc2Vjb25kcygpICsgbXNPZmZzZXQpOwogIHJldHVybiB0aW1lLnRvVVRDU3RyaW5nKCk7Cn0KCmZ1bmN0aW9uIHBhcnNlRXhwaXJlU3RyaW5nKHN0cikgewogIHZhciB0aW1lc3RhbXAgPSAwOwogIHZhciBkYXlzID0gc3RyLm1hdGNoKC8oXGQrKWQvKTsKICB2YXIgaG91cnMgPSBzdHIubWF0Y2goLyhcZCspaC8pOwogIHZhciBtaW51dGVzID0gc3RyLm1hdGNoKC8oXGQrKW0vKTsKICB2YXIgc2Vjb25kcyA9IHN0ci5tYXRjaCgvKFxkKylzLyk7CgogIGlmIChkYXlzKSB7CiAgICB0aW1lc3RhbXAgKz0gZGF5c1sxXSAqIDg2NGUrNTsKICB9CgogIGlmIChob3VycykgewogICAgdGltZXN0YW1wICs9IGhvdXJzWzFdICogMzZlKzU7CiAgfQoKICBpZiAobWludXRlcykgewogICAgdGltZXN0YW1wICs9IG1pbnV0ZXNbMV0gKiA2ZSs0OwogIH0KCiAgaWYgKHNlY29uZHMpIHsKICAgIHRpbWVzdGFtcCArPSBzZWNvbmRzWzFdICogMTAwMDsKICB9CgogIHJldHVybiB0aW1lc3RhbXAgPT09IDAgPyBzdHIgOiBnZXRTdHJpbmcodGltZXN0YW1wKTsKfQoKZnVuY3Rpb24gX3NldChrZXksIHZhbCkgewogIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICB2YXIgc3NyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIGV4cGlyZSwgZXhwaXJlVmFsdWU7CgogIGlmIChvcHRzLmV4cGlyZXMgIT09IHZvaWQgMCkgewogICAgLy8gaWYgaXQncyBhIERhdGUgT2JqZWN0CiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9wdHMuZXhwaXJlcykgPT09ICdbb2JqZWN0IERhdGVdJykgewogICAgICBleHBpcmUgPSBvcHRzLmV4cGlyZXMudG9VVENTdHJpbmcoKTsKICAgIH0gLy8gaWYgaXQncyBhIFN0cmluZyAoZWcuICIxNW0iLCAiMWgiLCAiMTNkIiwgIjFkIDE1bSIsICIzMXMiKQogICAgLy8gcG9zc2libGUgdW5pdHM6IGQgKGRheXMpLCBoIChob3VycyksIG0gKG1pbnV0ZXMpLCBzIChzZWNvbmRzKQogICAgZWxzZSBpZiAodHlwZW9mIG9wdHMuZXhwaXJlcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBleHBpcmUgPSBwYXJzZUV4cGlyZVN0cmluZyhvcHRzLmV4cGlyZXMpOwogICAgICB9IC8vIG90aGVyd2lzZSBpdCBtdXN0IGJlIGEgTnVtYmVyIChkZWZpbmVkIGluIGRheXMpCiAgICAgIGVsc2UgewogICAgICAgICAgZXhwaXJlVmFsdWUgPSBwYXJzZUZsb2F0KG9wdHMuZXhwaXJlcyk7CiAgICAgICAgICBleHBpcmUgPSBpc05hTihleHBpcmVWYWx1ZSkgPT09IGZhbHNlID8gZ2V0U3RyaW5nKGV4cGlyZVZhbHVlICogODY0ZSs1KSA6IG9wdHMuZXhwaXJlczsKICAgICAgICB9CiAgfQoKICB2YXIga2V5VmFsdWUgPSAiIi5jb25jYXQoZW5jb2RlKGtleSksICI9IikuY29uY2F0KHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbCkpOwogIHZhciBjb29raWUgPSBba2V5VmFsdWUsIGV4cGlyZSAhPT0gdm9pZCAwID8gJzsgRXhwaXJlcz0nICsgZXhwaXJlIDogJycsIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFCiAgb3B0cy5wYXRoID8gJzsgUGF0aD0nICsgb3B0cy5wYXRoIDogJycsIG9wdHMuZG9tYWluID8gJzsgRG9tYWluPScgKyBvcHRzLmRvbWFpbiA6ICcnLCBvcHRzLnNhbWVTaXRlID8gJzsgU2FtZVNpdGU9JyArIG9wdHMuc2FtZVNpdGUgOiAnJywgb3B0cy5odHRwT25seSA/ICc7IEh0dHBPbmx5JyA6ICcnLCBvcHRzLnNlY3VyZSA/ICc7IFNlY3VyZScgOiAnJywgb3B0cy5vdGhlciA/ICc7ICcgKyBvcHRzLm90aGVyIDogJyddLmpvaW4oJycpOwoKICBpZiAoc3NyKSB7CiAgICBpZiAoc3NyLnJlcS5xQ29va2llcykgewogICAgICBzc3IucmVxLnFDb29raWVzLnB1c2goY29va2llKTsKICAgIH0gZWxzZSB7CiAgICAgIHNzci5yZXEucUNvb2tpZXMgPSBbY29va2llXTsKICAgIH0KCiAgICBzc3IucmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIHNzci5yZXEucUNvb2tpZXMpOyAvLyBtYWtlIHRlbXBvcmFyeSB1cGRhdGUgc28gZnV0dXJlIGdldCgpCiAgICAvLyB3aXRoaW4gc2FtZSBTU1IgdGltZWZyYW1lIHdvdWxkIHJldHVybiB0aGUgc2V0IHZhbHVlCgogICAgdmFyIGFsbCA9IHNzci5yZXEuaGVhZGVycy5jb29raWUgfHwgJyc7CgogICAgaWYgKGV4cGlyZSAhPT0gdm9pZCAwICYmIGV4cGlyZVZhbHVlIDwgMCkgewogICAgICB2YXIgX3ZhbCA9IF9nZXQoa2V5LCBzc3IpOwoKICAgICAgaWYgKF92YWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGFsbCA9IGFsbC5yZXBsYWNlKCIiLmNvbmNhdChrZXksICI9IikuY29uY2F0KF92YWwsICI7ICIpLCAnJykucmVwbGFjZSgiOyAiLmNvbmNhdChrZXksICI9IikuY29uY2F0KF92YWwpLCAnJykucmVwbGFjZSgiIi5jb25jYXQoa2V5LCAiPSIpLmNvbmNhdChfdmFsKSwgJycpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBhbGwgPSBhbGwgPyAiIi5jb25jYXQoa2V5VmFsdWUsICI7ICIpLmNvbmNhdChhbGwpIDogY29va2llOwogICAgfQoKICAgIHNzci5yZXEuaGVhZGVycy5jb29raWUgPSBhbGw7CiAgfSBlbHNlIHsKICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZTsKICB9Cn0KCmZ1bmN0aW9uIF9nZXQoa2V5LCBzc3IpIHsKICB2YXIgY29va2llU291cmNlID0gc3NyID8gc3NyLnJlcS5oZWFkZXJzIDogZG9jdW1lbnQsCiAgICAgIGNvb2tpZXMgPSBjb29raWVTb3VyY2UuY29va2llID8gY29va2llU291cmNlLmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdLAogICAgICBsID0gY29va2llcy5sZW5ndGg7CiAgdmFyIHJlc3VsdCA9IGtleSA/IG51bGwgOiB7fSwKICAgICAgaSA9IDAsCiAgICAgIHBhcnRzLAogICAgICBuYW1lLAogICAgICBjb29raWU7CgogIGZvciAoOyBpIDwgbDsgaSsrKSB7CiAgICBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTsKICAgIG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7CiAgICBjb29raWUgPSBwYXJ0cy5qb2luKCc9Jyk7CgogICAgaWYgKCFrZXkpIHsKICAgICAgcmVzdWx0W25hbWVdID0gY29va2llOwogICAgfSBlbHNlIGlmIChrZXkgPT09IG5hbWUpIHsKICAgICAgcmVzdWx0ID0gcmVhZChjb29raWUpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXN1bHQ7Cn0KCmZ1bmN0aW9uIF9yZW1vdmUoa2V5LCBvcHRpb25zLCBzc3IpIHsKICBfc2V0KGtleSwgJycsIF9vYmplY3RTcHJlYWQoewogICAgZXhwaXJlczogLTEKICB9LCBvcHRpb25zKSwgc3NyKTsKfQoKZnVuY3Rpb24gX2hhcyhrZXksIHNzcikgewogIHJldHVybiBfZ2V0KGtleSwgc3NyKSAhPT0gbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldE9iamVjdChzc3IpIHsKICByZXR1cm4gewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICAgIHJldHVybiBfZ2V0KGtleSwgc3NyKTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbCwgb3B0cykgewogICAgICByZXR1cm4gX3NldChrZXksIHZhbCwgb3B0cywgc3NyKTsKICAgIH0sCiAgICBoYXM6IGZ1bmN0aW9uIGhhcyhrZXkpIHsKICAgICAgcmV0dXJuIF9oYXMoa2V5LCBzc3IpOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGtleSwgb3B0aW9ucykgewogICAgICByZXR1cm4gX3JlbW92ZShrZXksIG9wdGlvbnMsIHNzcik7CiAgICB9LAogICAgZ2V0QWxsOiBmdW5jdGlvbiBnZXRBbGwoKSB7CiAgICAgIHJldHVybiBfZ2V0KG51bGwsIHNzcik7CiAgICB9CiAgfTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgcGFyc2VTU1I6IGZ1bmN0aW9uIHBhcnNlU1NSKHNzckNvbnRleHQpIHsKICAgIHJldHVybiBzc3JDb250ZXh0ICE9PSB2b2lkIDAgPyBnZXRPYmplY3Qoc3NyQ29udGV4dCkgOiB0aGlzOwogIH0sCiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChfcmVmKSB7CiAgICB2YXIgJHEgPSBfcmVmLiRxLAogICAgICAgIHF1ZXVlcyA9IF9yZWYucXVldWVzOwoKICAgIGlmIChpc1NTUiA9PT0gdHJ1ZSkgewogICAgICBxdWV1ZXMuc2VydmVyLnB1c2goZnVuY3Rpb24gKHEsIGN0eCkgewogICAgICAgIHEuY29va2llcyA9IGdldE9iamVjdChjdHguc3NyKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGdldE9iamVjdCgpKTsKICAgICAgJHEuY29va2llcyA9IHRoaXM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/plugins/Cookies.js"],"names":["isSSR","encode","string","encodeURIComponent","decode","decodeURIComponent","stringifyCookieValue","value","Object","JSON","stringify","read","indexOf","slice","replace","parse","e","getString","msOffset","time","Date","setMilliseconds","getMilliseconds","toUTCString","parseExpireString","str","timestamp","days","match","hours","minutes","seconds","set","key","val","opts","ssr","expire","expireValue","expires","prototype","toString","call","parseFloat","isNaN","keyValue","cookie","path","domain","sameSite","httpOnly","secure","other","join","req","qCookies","push","res","setHeader","all","headers","get","undefined","document","cookieSource","cookies","split","l","length","result","i","parts","name","shift","remove","options","has","getObject","getAll","parseSSR","ssrContext","install","$q","queues","server","q","ctx","assign"],"mappings":"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","sourcesContent":["import { isSSR } from './Platform.js'\n\nfunction encode (string) {\n  return encodeURIComponent(string)\n}\n\nfunction decode (string) {\n  return decodeURIComponent(string)\n}\n\nfunction stringifyCookieValue (value) {\n  return encode(value === Object(value) ? JSON.stringify(value) : '' + value)\n}\n\nfunction read (string) {\n  if (string === '') {\n    return string\n  }\n\n  if (string.indexOf('\"') === 0) {\n    // This is a quoted cookie as according to RFC2068, unescape...\n    string = string.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\')\n  }\n\n  // Replace server-side written pluses with spaces.\n  // If we can't decode the cookie, ignore it, it's unusable.\n  // If we can't parse the cookie, ignore it, it's unusable.\n  string = decode(string.replace(/\\+/g, ' '))\n\n  try {\n    string = JSON.parse(string)\n  }\n  catch (e) {}\n\n  return string\n}\n\nfunction getString (msOffset) {\n  const time = new Date()\n  time.setMilliseconds(time.getMilliseconds() + msOffset)\n  return time.toUTCString()\n}\n\nfunction parseExpireString (str) {\n  let timestamp = 0\n\n  const days = str.match(/(\\d+)d/)\n  const hours = str.match(/(\\d+)h/)\n  const minutes = str.match(/(\\d+)m/)\n  const seconds = str.match(/(\\d+)s/)\n\n  if (days) { timestamp += days[1] * 864e+5 }\n  if (hours) { timestamp += hours[1] * 36e+5 }\n  if (minutes) { timestamp += minutes[1] * 6e+4 }\n  if (seconds) { timestamp += seconds[1] * 1000 }\n\n  return timestamp === 0\n    ? str\n    : getString(timestamp)\n}\n\nfunction set (key, val, opts = {}, ssr) {\n  let expire, expireValue\n\n  if (opts.expires !== void 0) {\n    // if it's a Date Object\n    if (Object.prototype.toString.call(opts.expires) === '[object Date]') {\n      expire = opts.expires.toUTCString()\n    }\n    // if it's a String (eg. \"15m\", \"1h\", \"13d\", \"1d 15m\", \"31s\")\n    // possible units: d (days), h (hours), m (minutes), s (seconds)\n    else if (typeof opts.expires === 'string') {\n      expire = parseExpireString(opts.expires)\n    }\n    // otherwise it must be a Number (defined in days)\n    else {\n      expireValue = parseFloat(opts.expires)\n      expire = isNaN(expireValue) === false\n        ? getString(expireValue * 864e+5)\n        : opts.expires\n    }\n  }\n\n  const keyValue = `${encode(key)}=${stringifyCookieValue(val)}`\n\n  const cookie = [\n    keyValue,\n    expire !== void 0 ? '; Expires=' + expire : '', // use expires attribute, max-age is not supported by IE\n    opts.path ? '; Path=' + opts.path : '',\n    opts.domain ? '; Domain=' + opts.domain : '',\n    opts.sameSite ? '; SameSite=' + opts.sameSite : '',\n    opts.httpOnly ? '; HttpOnly' : '',\n    opts.secure ? '; Secure' : '',\n    opts.other ? '; ' + opts.other : ''\n  ].join('')\n\n  if (ssr) {\n    if (ssr.req.qCookies) {\n      ssr.req.qCookies.push(cookie)\n    }\n    else {\n      ssr.req.qCookies = [ cookie ]\n    }\n\n    ssr.res.setHeader('Set-Cookie', ssr.req.qCookies)\n\n    // make temporary update so future get()\n    // within same SSR timeframe would return the set value\n\n    let all = ssr.req.headers.cookie || ''\n\n    if (expire !== void 0 && expireValue < 0) {\n      const val = get(key, ssr)\n      if (val !== undefined) {\n        all = all\n          .replace(`${key}=${val}; `, '')\n          .replace(`; ${key}=${val}`, '')\n          .replace(`${key}=${val}`, '')\n      }\n    }\n    else {\n      all = all\n        ? `${keyValue}; ${all}`\n        : cookie\n    }\n\n    ssr.req.headers.cookie = all\n  }\n  else {\n    document.cookie = cookie\n  }\n}\n\nfunction get (key, ssr) {\n  const\n    cookieSource = ssr ? ssr.req.headers : document,\n    cookies = cookieSource.cookie ? cookieSource.cookie.split('; ') : [],\n    l = cookies.length\n  let\n    result = key ? null : {},\n    i = 0,\n    parts,\n    name,\n    cookie\n\n  for (; i < l; i++) {\n    parts = cookies[i].split('=')\n    name = decode(parts.shift())\n    cookie = parts.join('=')\n\n    if (!key) {\n      result[name] = cookie\n    }\n    else if (key === name) {\n      result = read(cookie)\n      break\n    }\n  }\n\n  return result\n}\n\nfunction remove (key, options, ssr) {\n  set(\n    key,\n    '',\n    { expires: -1, ...options },\n    ssr\n  )\n}\n\nfunction has (key, ssr) {\n  return get(key, ssr) !== null\n}\n\nexport function getObject (ssr) {\n  return {\n    get: key => get(key, ssr),\n    set: (key, val, opts) => set(key, val, opts, ssr),\n    has: key => has(key, ssr),\n    remove: (key, options) => remove(key, options, ssr),\n    getAll: () => get(null, ssr)\n  }\n}\n\nexport default {\n  parseSSR (ssrContext) {\n    return ssrContext !== void 0\n      ? getObject(ssrContext)\n      : this\n  },\n\n  install ({ $q, queues }) {\n    if (isSSR === true) {\n      queues.server.push((q, ctx) => {\n        q.cookies = getObject(ctx.ssr)\n      })\n    }\n    else {\n      Object.assign(this, getObject())\n      $q.cookies = this\n    }\n  }\n}\n"]}]}