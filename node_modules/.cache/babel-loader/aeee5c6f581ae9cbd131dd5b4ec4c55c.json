{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js!/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/mixins/validate.js","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/mixins/validate.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgeyB0ZXN0UGF0dGVybiB9IGZyb20gJy4uL3V0aWxzL3BhdHRlcm5zLmpzJzsKdmFyIGxhenlSdWxlc1ZhbHVlcyA9IFt0cnVlLCBmYWxzZSwgJ29uZGVtYW5kJ107CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHt9LAogICAgZXJyb3I6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGVycm9yTWVzc2FnZTogU3RyaW5nLAogICAgbm9FcnJvckljb246IEJvb2xlYW4sCiAgICBydWxlczogQXJyYXksCiAgICByZWFjdGl2ZVJ1bGVzOiBCb29sZWFuLAogICAgbGF6eVJ1bGVzOiB7CiAgICAgIHR5cGU6IFtCb29sZWFuLCBTdHJpbmddLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2KSB7CiAgICAgICAgcmV0dXJuIGxhenlSdWxlc1ZhbHVlcy5pbmNsdWRlcyh2KTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzRGlydHk6IG51bGwsCiAgICAgIGlubmVyRXJyb3I6IGZhbHNlLAogICAgICBpbm5lckVycm9yTWVzc2FnZTogdm9pZCAwCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgdGhpcy5fX3ZhbGlkYXRlSWZOZWVkZWQoKTsKICAgIH0sCiAgICByZWFjdGl2ZVJ1bGVzOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgICAgaWYgKHRoaXMudW53YXRjaFJ1bGVzID09PSB2b2lkIDApIHsKICAgICAgICAgICAgdGhpcy51bndhdGNoUnVsZXMgPSB0aGlzLiR3YXRjaCgncnVsZXMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMuX192YWxpZGF0ZUlmTmVlZGVkKHRydWUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMudW53YXRjaFJ1bGVzICE9PSB2b2lkIDApIHsKICAgICAgICAgIHRoaXMudW53YXRjaFJ1bGVzKCk7CiAgICAgICAgICB0aGlzLnVud2F0Y2hSdWxlcyA9IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIGZvY3VzZWQ6IGZ1bmN0aW9uIGZvY3VzZWQoX2ZvY3VzZWQpIHsKICAgICAgaWYgKHRoaXMubGF6eVJ1bGVzICE9PSAnb25kZW1hbmQnKSB7CiAgICAgICAgaWYgKF9mb2N1c2VkID09PSB0cnVlKSB7CiAgICAgICAgICBpZiAodGhpcy5pc0RpcnR5ID09PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuaXNEaXJ0eSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0RpcnR5ID09PSBmYWxzZSAmJiB0aGlzLmhhc1J1bGVzID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmlzRGlydHkgPSB0cnVlOwogICAgICAgICAgdGhpcy52YWxpZGF0ZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhhc1J1bGVzOiBmdW5jdGlvbiBoYXNSdWxlcygpIHsKICAgICAgcmV0dXJuIHRoaXMucnVsZXMgIT09IHZvaWQgMCAmJiB0aGlzLnJ1bGVzICE9PSBudWxsICYmIHRoaXMucnVsZXMubGVuZ3RoID4gMDsKICAgIH0sCiAgICBoYXNFcnJvcjogZnVuY3Rpb24gaGFzRXJyb3IoKSB7CiAgICAgIHJldHVybiB0aGlzLmVycm9yID09PSB0cnVlIHx8IHRoaXMuaW5uZXJFcnJvciA9PT0gdHJ1ZTsKICAgIH0sCiAgICBjb21wdXRlZEVycm9yTWVzc2FnZTogZnVuY3Rpb24gY29tcHV0ZWRFcnJvck1lc3NhZ2UoKSB7CiAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5lcnJvck1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIHRoaXMuZXJyb3JNZXNzYWdlLmxlbmd0aCA+IDAgPyB0aGlzLmVycm9yTWVzc2FnZSA6IHRoaXMuaW5uZXJFcnJvck1lc3NhZ2U7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy52YWxpZGF0ZUluZGV4ID0gMDsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnVud2F0Y2hSdWxlcyAhPT0gdm9pZCAwICYmIHRoaXMudW53YXRjaFJ1bGVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldFZhbGlkYXRpb246IGZ1bmN0aW9uIHJlc2V0VmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy52YWxpZGF0ZUluZGV4Kys7CiAgICAgIHRoaXMuaW5uZXJMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuaXNEaXJ0eSA9IG51bGw7CiAgICAgIHRoaXMuaW5uZXJFcnJvciA9IGZhbHNlOwogICAgICB0aGlzLmlubmVyRXJyb3JNZXNzYWdlID0gdm9pZCAwOwogICAgfSwKCiAgICAvKgogICAgICogUmV0dXJuIHZhbHVlCiAgICAgKiAgIC0gdHJ1ZSAodmFsaWRhdGlvbiBzdWNjZWVkZWQpCiAgICAgKiAgIC0gZmFsc2UgKHZhbGlkYXRpb24gZmFpbGVkKQogICAgICogICAtIFByb21pc2UgKHBlbmRpbmcgYXN5bmMgdmFsaWRhdGlvbikKICAgICAqLwogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMudmFsdWU7CgogICAgICBpZiAodGhpcy5oYXNSdWxlcyAhPT0gdHJ1ZSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICB0aGlzLnZhbGlkYXRlSW5kZXgrKzsKCiAgICAgIGlmICh0aGlzLmlubmVyTG9hZGluZyAhPT0gdHJ1ZSAmJiB0aGlzLmxhenlSdWxlcyAhPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuaXNEaXJ0eSA9IHRydWU7CiAgICAgIH0KCiAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXJyLCBtc2cpIHsKICAgICAgICBpZiAoX3RoaXMyLmlubmVyRXJyb3IgIT09IGVycikgewogICAgICAgICAgX3RoaXMyLmlubmVyRXJyb3IgPSBlcnI7CiAgICAgICAgfQoKICAgICAgICB2YXIgbSA9IG1zZyB8fCB2b2lkIDA7CgogICAgICAgIGlmIChfdGhpczIuaW5uZXJFcnJvck1lc3NhZ2UgIT09IG0pIHsKICAgICAgICAgIF90aGlzMi5pbm5lckVycm9yTWVzc2FnZSA9IG07CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMyLmlubmVyTG9hZGluZyAhPT0gZmFsc2UpIHsKICAgICAgICAgIF90aGlzMi5pbm5lckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgcHJvbWlzZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ydWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBydWxlID0gdGhpcy5ydWxlc1tpXTsKICAgICAgICB2YXIgcmVzID0gdm9pZCAwOwoKICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHJlcyA9IHJ1bGUodmFsKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBydWxlID09PSAnc3RyaW5nJyAmJiB0ZXN0UGF0dGVybltydWxlXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICByZXMgPSB0ZXN0UGF0dGVybltydWxlXSh2YWwpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcyA9PT0gZmFsc2UgfHwgdHlwZW9mIHJlcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHVwZGF0ZSh0cnVlLCByZXMpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAocmVzICE9PSB0cnVlICYmIHJlcyAhPT0gdm9pZCAwKSB7CiAgICAgICAgICBwcm9taXNlcy5wdXNoKHJlcyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocHJvbWlzZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdXBkYXRlKGZhbHNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW5uZXJMb2FkaW5nICE9PSB0cnVlKSB7CiAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgaW5kZXggPSB0aGlzLnZhbGlkYXRlSW5kZXg7CiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKGluZGV4ICE9PSBfdGhpczIudmFsaWRhdGVJbmRleCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzID09PSB2b2lkIDAgfHwgQXJyYXkuaXNBcnJheShyZXMpID09PSBmYWxzZSB8fCByZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB1cGRhdGUoZmFsc2UpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICB2YXIgbXNnID0gcmVzLmZpbmQoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIHJldHVybiByID09PSBmYWxzZSB8fCB0eXBlb2YgciA9PT0gJ3N0cmluZyc7CiAgICAgICAgfSk7CiAgICAgICAgdXBkYXRlKG1zZyAhPT0gdm9pZCAwLCBtc2cpOwogICAgICAgIHJldHVybiBtc2cgPT09IHZvaWQgMDsKICAgICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoaW5kZXggPT09IF90aGlzMi52YWxpZGF0ZUluZGV4KSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgdXBkYXRlKHRydWUpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIF9fdmFsaWRhdGVJZk5lZWRlZDogZnVuY3Rpb24gX192YWxpZGF0ZUlmTmVlZGVkKGNoYW5nZWRSdWxlcykgewogICAgICBpZiAodGhpcy5oYXNSdWxlcyA9PT0gdHJ1ZSAmJiB0aGlzLmxhenlSdWxlcyAhPT0gJ29uZGVtYW5kJyAmJiAodGhpcy5pc0RpcnR5ID09PSB0cnVlIHx8IHRoaXMubGF6eVJ1bGVzICE9PSB0cnVlICYmIGNoYW5nZWRSdWxlcyAhPT0gdHJ1ZSkpIHsKICAgICAgICB0aGlzLnZhbGlkYXRlKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/quasar/src/mixins/validate.js"],"names":["testPattern","lazyRulesValues","props","value","error","type","Boolean","default","errorMessage","String","noErrorIcon","rules","Array","reactiveRules","lazyRules","validator","v","includes","data","isDirty","innerError","innerErrorMessage","watch","__validateIfNeeded","handler","val","unwatchRules","$watch","immediate","focused","hasRules","validate","computed","length","hasError","computedErrorMessage","mounted","validateIndex","beforeDestroy","methods","resetValidation","innerLoading","update","err","msg","m","promises","i","rule","res","push","index","Promise","all","then","isArray","find","r","e","console","changedRules"],"mappings":"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","sourcesContent":["import { testPattern } from '../utils/patterns.js'\n\nconst lazyRulesValues = [ true, false, 'ondemand' ]\n\nexport default {\n  props: {\n    value: {},\n\n    error: {\n      type: Boolean,\n      default: null\n    },\n    errorMessage: String,\n    noErrorIcon: Boolean,\n\n    rules: Array,\n    reactiveRules: Boolean,\n    lazyRules: {\n      type: [ Boolean, String ],\n      validator: v => lazyRulesValues.includes(v)\n    }\n  },\n\n  data () {\n    return {\n      isDirty: null,\n      innerError: false,\n      innerErrorMessage: void 0\n    }\n  },\n\n  watch: {\n    value () {\n      this.__validateIfNeeded()\n    },\n\n    reactiveRules: {\n      handler (val) {\n        if (val === true) {\n          if (this.unwatchRules === void 0) {\n            this.unwatchRules = this.$watch('rules', () => {\n              this.__validateIfNeeded(true)\n            })\n          }\n        }\n        else if (this.unwatchRules !== void 0) {\n          this.unwatchRules()\n          this.unwatchRules = void 0\n        }\n      },\n      immediate: true\n    },\n\n    focused (focused) {\n      if (this.lazyRules !== 'ondemand') {\n        if (focused === true) {\n          if (this.isDirty === null) {\n            this.isDirty = false\n          }\n        }\n        else if (this.isDirty === false && this.hasRules === true) {\n          this.isDirty = true\n          this.validate()\n        }\n      }\n    }\n  },\n\n  computed: {\n    hasRules () {\n      return this.rules !== void 0 &&\n        this.rules !== null &&\n        this.rules.length > 0\n    },\n\n    hasError () {\n      return this.error === true || this.innerError === true\n    },\n\n    computedErrorMessage () {\n      return typeof this.errorMessage === 'string' && this.errorMessage.length > 0\n        ? this.errorMessage\n        : this.innerErrorMessage\n    }\n  },\n\n  mounted () {\n    this.validateIndex = 0\n  },\n\n  beforeDestroy () {\n    this.unwatchRules !== void 0 && this.unwatchRules()\n  },\n\n  methods: {\n    resetValidation () {\n      this.validateIndex++\n      this.innerLoading = false\n      this.isDirty = null\n      this.innerError = false\n      this.innerErrorMessage = void 0\n    },\n\n    /*\n     * Return value\n     *   - true (validation succeeded)\n     *   - false (validation failed)\n     *   - Promise (pending async validation)\n     */\n    validate (val = this.value) {\n      if (this.hasRules !== true) {\n        return true\n      }\n\n      this.validateIndex++\n\n      if (this.innerLoading !== true && this.lazyRules !== true) {\n        this.isDirty = true\n      }\n\n      const update = (err, msg) => {\n        if (this.innerError !== err) {\n          this.innerError = err\n        }\n\n        const m = msg || void 0\n\n        if (this.innerErrorMessage !== m) {\n          this.innerErrorMessage = m\n        }\n\n        if (this.innerLoading !== false) {\n          this.innerLoading = false\n        }\n      }\n\n      const promises = []\n\n      for (let i = 0; i < this.rules.length; i++) {\n        const rule = this.rules[i]\n        let res\n\n        if (typeof rule === 'function') {\n          res = rule(val)\n        }\n        else if (typeof rule === 'string' && testPattern[rule] !== void 0) {\n          res = testPattern[rule](val)\n        }\n\n        if (res === false || typeof res === 'string') {\n          update(true, res)\n          return false\n        }\n        else if (res !== true && res !== void 0) {\n          promises.push(res)\n        }\n      }\n\n      if (promises.length === 0) {\n        update(false)\n        return true\n      }\n\n      if (this.innerLoading !== true) {\n        this.innerLoading = true\n      }\n\n      const index = this.validateIndex\n\n      return Promise.all(promises).then(\n        res => {\n          if (index !== this.validateIndex) {\n            return true\n          }\n\n          if (res === void 0 || Array.isArray(res) === false || res.length === 0) {\n            update(false)\n            return true\n          }\n\n          const msg = res.find(r => r === false || typeof r === 'string')\n          update(msg !== void 0, msg)\n          return msg === void 0\n        },\n        e => {\n          if (index === this.validateIndex) {\n            console.error(e)\n            update(true)\n            return false\n          }\n\n          return true\n        }\n      )\n    },\n\n    __validateIfNeeded (changedRules) {\n      if (\n        this.hasRules === true &&\n        this.lazyRules !== 'ondemand' &&\n        (this.isDirty === true || (this.lazyRules !== true && changedRules !== true))\n      ) {\n        this.validate()\n      }\n    }\n  }\n}\n"]}]}