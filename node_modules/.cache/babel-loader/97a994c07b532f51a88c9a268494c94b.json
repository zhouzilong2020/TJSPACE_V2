{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js!/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhouzilong/Desktop/2020-09-19-0005/src/services/forum.js","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/services/forum.js","mtime":1603287044558},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZS91c2VySW5mbyI7CmltcG9ydCB7IFVSTCB9IGZyb20gIi4vY29uZmlnIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAicXVhc2FyL3NyYy9wbHVnaW5zL0xvYWRpbmcuanMiOwppbXBvcnQgTm90aWZ5IGZyb20gInF1YXNhci9zcmMvcGx1Z2lucy9Ob3RpZnkuanMiOwp2YXIgaXNMb2FkaW5nID0gMDsKdmFyIHRpbWVyOwp2YXIgQ2FuY2VsVG9rZW4gPSBheGlvcy5DYW5jZWxUb2tlbjsKdmFyIGNhbmNlbDsKdmFyIGNhbmNlbFRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHsKICBjYW5jZWwgPSBjOwp9KTsKLyoqDQogKiDlop7liqDkuIDkuKrliqDovb3kuK3nmoTor7fmsYLvvIzmnInliqDovb3kuK3nmoTor7fmsYLml7bmmL7npLpMb2FkaW5nDQogKi8KCmZ1bmN0aW9uIFNldExvYWRpbmcoKSB7CiAgaWYgKGlzTG9hZGluZyA9PSAwKSB7CiAgICBMb2FkaW5nLnNob3coKTsKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChpc0xvYWRpbmcgPiAwKSB7CiAgICAgICAgTm90aWZ5LmNyZWF0ZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+35rGC6LaF5pe277yM6K+36YeN6K+VJywKICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJywKICAgICAgICAgIHRpbWVvdXQ6ICcyMDAwJwogICAgICAgIH0pOwogICAgICAgIGNhbmNlbCgnVGltZU91dCcpOwogICAgICB9CiAgICB9LCA1MDAwKTsKICB9CgogIGlzTG9hZGluZysrOwp9Ci8qKg0KICog5YeP5bCR5LiA5Liq5Yqg6L295Lit55qE6K+35rGC77yM5peg5Yqg6L295Lit55qE6K+35rGC5pe26ZqQ6JePTG9hZGluZw0KICovCgoKZnVuY3Rpb24gVW5zZXRMb2FkaW5nKCkgewogIGlzTG9hZGluZy0tOwoKICBpZiAoaXNMb2FkaW5nID09IDApIHsKICAgIExvYWRpbmcuaGlkZSgpOwogICAgaXNMb2FkaW5nID0gMDsKCiAgICBpZiAodGltZXIgIT0gdm9pZCAwKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgIExvYWRpbmcuaGlkZSgpOwogICAgICB0aW1lciA9IHZvaWQgMDsKICAgIH0KICB9Cn0KLyoqDQogKiANCiAqIEBwYXJhbSB7U3RyaW5nfSBhcGkg5o6l5Y+j5ZCN56ewDQogKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIOivt+axguWPguaVsA0KICovCgoKZnVuY3Rpb24gZ2V0KGFwaSwgcGFyYW1zKSB7CiAgU2V0TG9hZGluZygpOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBheGlvcy5nZXQoIiIuY29uY2F0KFVSTCkgKyBhcGksIHsKICAgICAgY2FuY2VsVG9rZW46IGNhbmNlbFRva2VuLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogc3RvcmUuc3RhdGUudG9rZW4KICAgICAgfSwKICAgICAgcGFyYW1zOiBwYXJhbXMKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgIFVuc2V0TG9hZGluZygpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIFVuc2V0TG9hZGluZygpOwogICAgfSk7CiAgfSk7Cn0KLyoqDQogKiANCiAqIEBwYXJhbSB7U3RyaW5nfSBhcGkg5o6l5Y+j5ZCN56ewDQogKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIOivt+axguWPguaVsA0KICovCgoKZnVuY3Rpb24gcG9zdChhcGksIHBhcmFtcykgewogIFNldExvYWRpbmcoKTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgYXhpb3MucG9zdCgiIi5jb25jYXQoVVJMKSArIGFwaSwge30sIHsKICAgICAgY2FuY2VsVG9rZW46IGNhbmNlbFRva2VuLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogc3RvcmUuc3RhdGUudG9rZW4KICAgICAgfSwKICAgICAgcGFyYW1zOiBwYXJhbXMKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgIFVuc2V0TG9hZGluZygpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIFVuc2V0TG9hZGluZygpOwogICAgfSk7CiAgfSk7Cn0KLyoqDQogKiDlj5bmtojmiYDmnInor7fmsYINCiAqLwoKCmV4cG9ydCBmdW5jdGlvbiBSZXF1ZXN0Q2FuY2VsKCkgewogIGlmIChpc0xvYWRpbmcgPiAwKSB7CiAgICBjYW5jZWwoJ2NhbmNlbCcpOwogICAgY2FuY2VsVG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykgewogICAgICBjYW5jZWwgPSBjOwogICAgfSk7CiAgfQoKICBjbGVhclRpbWVvdXQodGltZXIpOwogIHRpbWVyID0gdm9pZCAwOwp9CmV4cG9ydCB2YXIgR2V0UG9zdCA9IGZ1bmN0aW9uIEdldFBvc3QocGFyYW1zKSB7CiAgcmV0dXJuIGdldCgnU2hvdy9wb3N0JywgcGFyYW1zKTsKfTsKZXhwb3J0IHZhciBHZXRQb3N0cyA9IGZ1bmN0aW9uIEdldFBvc3RzKHBhcmFtcykgewogIHJldHVybiBnZXQoJ1Nob3cvZ2V0UG9zdHMnLCBwYXJhbXMpOwp9OwpleHBvcnQgdmFyIEdldFJlcGx5ID0gZnVuY3Rpb24gR2V0UmVwbHkocGFyYW1zKSB7CiAgcmV0dXJuIGdldCgnU2hvdy9yZXBseScsIHBhcmFtcyk7Cn07CmV4cG9ydCB2YXIgUG9zdFJlcGx5ID0gZnVuY3Rpb24gUG9zdFJlcGx5KHBhcmFtcykgewogIHJldHVybiBwb3N0KCdQb3N0L3JlcGx5JywgcGFyYW1zKTsKfTsKZXhwb3J0IHZhciBDYW5FdmFsdWF0ZSA9IGZ1bmN0aW9uIENhbkV2YWx1YXRlKHBhcmFtcykgewogIHJldHVybiBnZXQoJ1Bvc3QvQ2FuRXZhbHVhdGUnLCBwYXJhbXMpOwp9OwpleHBvcnQgdmFyIEV2YWx1YXRlID0gZnVuY3Rpb24gRXZhbHVhdGUocGFyYW1zKSB7CiAgcmV0dXJuIHBvc3QoJ1Bvc3QvZXZhbHVhdGUnLCBwYXJhbXMpOwp9OwpleHBvcnQgdmFyIENhbmNlbEV2YWx1YXRpb24gPSBmdW5jdGlvbiBDYW5jZWxFdmFsdWF0aW9uKHBhcmFtcykgewogIHJldHVybiBwb3N0KCdQb3N0L0NhbmNlbEV2YWx1YXRpb24nLCBwYXJhbXMpOwp9Ow=="},{"version":3,"sources":["/Users/zhouzilong/Desktop/2020-09-19-0005/src/services/forum.js"],"names":["axios","store","URL","isLoading","timer","CancelToken","cancel","cancelToken","executor","c","SetLoading","Loading","show","setTimeout","Notify","create","message","position","timeout","UnsetLoading","hide","clearTimeout","get","api","params","Promise","resolve","reject","headers","Authorization","state","token","then","response","data","catch","error","post","RequestCancel","GetPost","GetPosts","GetReply","PostReply","CanEvaluate","Evaluate","CancelEvaluation"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport store from \"../store/userInfo\"\r\nimport {\r\n    URL\r\n} from \"./config\";\r\nimport {\r\n    Loading,\r\n    Notify\r\n} from 'quasar'\r\n\r\n\r\nvar isLoading = 0\r\nvar timer\r\nconst CancelToken = axios.CancelToken\r\nvar cancel\r\nvar cancelToken = new CancelToken(function executor(c){\r\n    cancel = c;\r\n})\r\n\r\n/**\r\n * 增加一个加载中的请求，有加载中的请求时显示Loading\r\n */\r\nfunction SetLoading(){\r\n    if (isLoading == 0) {\r\n        Loading.show()\r\n        timer = setTimeout(()=>{\r\n            if(isLoading>0){\r\n                Notify.create({\r\n                    message: '请求超时，请重试',\r\n                    position: 'center',\r\n                    timeout: '2000'\r\n                })\r\n                cancel('TimeOut')\r\n            }\r\n        },5000) \r\n    }\r\n    isLoading++;\r\n}\r\n/**\r\n * 减少一个加载中的请求，无加载中的请求时隐藏Loading\r\n */\r\nfunction UnsetLoading(){\r\n    isLoading--;\r\n    if (isLoading == 0) {\r\n        Loading.hide()\r\n        isLoading = 0\r\n        if (timer != void 0) {\r\n            clearTimeout(timer)\r\n            Loading.hide()\r\n            timer = void 0\r\n        }\r\n    }\r\n}\r\n/**\r\n * \r\n * @param {String} api 接口名称\r\n * @param {Object} params 请求参数\r\n */\r\nfunction get(api, params) {\r\n    SetLoading()\r\n    return new Promise((resolve,reject) => {\r\n        axios.get(`${URL}` + api, {\r\n            cancelToken :cancelToken,\r\n            headers: {\r\n                Authorization: store.state.token\r\n            },\r\n            params: params\r\n        }).then(response => {\r\n            resolve(response.data);\r\n            UnsetLoading();\r\n        }).catch((error) => {\r\n            reject(error)\r\n            UnsetLoading();\r\n        })\r\n    })\r\n}\r\n/**\r\n * \r\n * @param {String} api 接口名称\r\n * @param {Object} params 请求参数\r\n */\r\nfunction post(api, params) {\r\n    SetLoading()\r\n    return new Promise((resolve,reject) => {\r\n        axios.post(`${URL}` + api, {}, {\r\n            cancelToken :cancelToken,\r\n            headers: {\r\n                Authorization: store.state.token\r\n            },\r\n            params: params\r\n        }).then(response => {\r\n            resolve(response.data);\r\n            UnsetLoading();\r\n        }).catch((error) => {\r\n            reject(error)\r\n            UnsetLoading();\r\n        })\r\n    })\r\n}\r\n/**\r\n * 取消所有请求\r\n */\r\nexport function RequestCancel(){\r\n    if(isLoading>0){\r\n        cancel('cancel')\r\n        cancelToken = new CancelToken(function executor(c){\r\n            cancel = c;\r\n        })\r\n    }\r\n    clearTimeout(timer)\r\n    timer = void 0\r\n}\r\n\r\nexport const GetPost = params => get('Show/post', params);\r\nexport const GetPosts = params => get('Show/getPosts', params);\r\nexport const GetReply = params => get('Show/reply', params);\r\nexport const PostReply = params => post('Post/reply', params);\r\nexport const CanEvaluate = params => get('Post/CanEvaluate', params);\r\nexport const Evaluate = params => post('Post/evaluate',params)\r\nexport const CancelEvaluation = params => post('Post/CancelEvaluation',params)\r\n"]}]}