{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/CourseInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/CourseInfo.vue","mtime":1605872947686},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldENvbW1lbnQgfSBmcm9tICIuLi9zZXJ2aWNlcy9jb21tZW50U2VydmljZSI7CmltcG9ydCB7IGdldENvdXJzZUluZm8gfSBmcm9tICIuLi9zZXJ2aWNlcy9jb3Vyc2VTZXJ2aWNlIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKCmltcG9ydCBDb3Vyc2VDb21tZW50IGZyb20gIi4uL2NvbXBvbmVudHMvY291cnNlSW5mby9Db3Vyc2VDb21tZW50IjsKaW1wb3J0IENvdXJzZURldGFpbCBmcm9tICIuLi9jb21wb25lbnRzL2NvdXJzZUluZm8vQ291cnNlRGV0YWlsIjsKaW1wb3J0IENvdXJzZUhlYWQgZnJvbSAiLi4vY29tcG9uZW50cy9jb3Vyc2VJbmZvL0NvdXJzZUhlYWQiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDb3Vyc2VJbmZvIiwKICBjb21wb25lbnRzOiB7CiAgICBDb3Vyc2VDb21tZW50LAogICAgQ291cnNlRGV0YWlsLAogICAgQ291cnNlSGVhZCwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgidXNlckluZm8iLCBbInRva2VuIiwgInVzZXJJbmZvIl0pLAogICAgY29tbWVudFN0YXRpc3RpYygpIHsKICAgICAgbGV0IHN0YXRpc3RpYyA9IHsKICAgICAgICByZXZlaXdDbnQ6IDAsCiAgICAgICAgY29udGVudDogMCwKICAgICAgICB0ZWFjaGluZzogMCwKICAgICAgICBncmFkaW5nOiAwLAogICAgICAgIHdvcmtsb2FkOiAwLAogICAgICB9OwogICAgICBzdGF0aXN0aWMucmV2ZWl3Q250ID0gdGhpcy5jb21tZW50cy5sZW5ndGg7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGlzdGljLnJldmVpd0NudDsgaSsrKSB7CiAgICAgICAgc3RhdGlzdGljLmNvbnRlbnQgKz0gK3RoaXMuY29tbWVudHNbaV0ub3ZlcmFsbDsKICAgICAgICBzdGF0aXN0aWMudGVhY2hpbmcgKz0gK3RoaXMuY29tbWVudHNbaV0uaW5zdHJ1Y3RvcjsKICAgICAgICBzdGF0aXN0aWMuZ3JhZGluZyArPSArdGhpcy5jb21tZW50c1tpXS5ncmFkaW5nOwogICAgICAgIHN0YXRpc3RpYy53b3JrbG9hZCArPSArdGhpcy5jb21tZW50c1tpXS53b3JrbG9hZDsKICAgICAgfQogICAgICBzdGF0aXN0aWMuY29udGVudCAvPSBzdGF0aXN0aWMucmV2ZWl3Q250OwogICAgICBzdGF0aXN0aWMudGVhY2hpbmcgLz0gc3RhdGlzdGljLnJldmVpd0NudDsKICAgICAgc3RhdGlzdGljLmdyYWRpbmcgLz0gc3RhdGlzdGljLnJldmVpd0NudDsKICAgICAgc3RhdGlzdGljLndvcmtsb2FkIC89IHN0YXRpc3RpYy5yZXZlaXdDbnQ7CgogICAgICBzdGF0aXN0aWMuY29udGVudCA9IHN0YXRpc3RpYy5jb250ZW50LnRvRml4ZWQoMSk7CiAgICAgIHN0YXRpc3RpYy50ZWFjaGluZyA9IHN0YXRpc3RpYy50ZWFjaGluZy50b0ZpeGVkKDEpOwogICAgICBzdGF0aXN0aWMuZ3JhZGluZyA9IHN0YXRpc3RpYy5ncmFkaW5nLnRvRml4ZWQoMSk7CiAgICAgIHN0YXRpc3RpYy53b3JrbG9hZCA9IHN0YXRpc3RpYy53b3JrbG9hZC50b0ZpeGVkKDEpOwoKICAgICAgcmV0dXJuIHN0YXRpc3RpYzsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGV4dDogIiIsCiAgICAgIGxvZ29QYXRoOiByZXF1aXJlKCIuLi9hc3NldHMvVEpVLnBuZyIpLAogICAgICBhdmF0YXJQYXRoOiByZXF1aXJlKCIuLi9hc3NldHMvYm95LWF2YXRhci5wbmciKSwKICAgICAgYXZhdGFyQkdQYXRoOiByZXF1aXJlKCIuLi9hc3NldHMvbWF0ZXJpYWwucG5nIiksCgogICAgICBjb3Vyc2VJbmZvOiB7CiAgICAgICAgdGl0bGU6ICLmlbDmja7lupPljp/nkIbkuI7lupTnlKgiLAogICAgICAgIHRlYWNoZXI6ICLoooHml7bph5EiLAogICAgICAgIGNvdXJzZUlkOiAiNDIwMjQ0IiwKICAgICAgICBzZWN0aW9uOiAiMjAyMCDmmKUiLAogICAgICAgIGRlcGFydG1lbnQ6ICLova/ku7blrabpmaIiLAogICAgICAgIGNyZWRpdDogIjQiLAogICAgICAgIHNlY3Rpb25zOiBbIjIwMjAt5pilIl0sCiAgICAgICAgc3lsbGFidXM6CiAgICAgICAgICAiQ2hhcHRlciAxOiBJbnRyb2R1Y3Rpb24gQ2hhcHRlciAyOiBJbnRyb2R1Y2F0aW9uIHRvIHRoZSBSZWxhdGlvbmFsIE1vZGVsIENoYXB0ZXIgMzogSW50b2R1Y3Rpb24gdG8gU1FMIENoYXB0ZXIgNDogSW50ZXJtZWRpYXRlIFNRTENoYXB0ZXIgNTogQWR2YW5jZWQgU1FMIFNlY3Rpb25zIDUuNCBvbndhcmRzIG9taXR0ZWQuIENoYXB0ZXIgNjogT3RoZXIgUmVsYXRpb25hbCBMYW5ndWFnZXMgU2VjdGlvbiA2LjEgKFJlbGF0aW9uYWwgQWxnZWJyYSkgY292ZXJlZCBpbiBicmllZu+8jFNlY3Rpb25zIDYuMiBhbmQgNi4zIG9taXR0ZWQgQ2hhcHRlciA3OiBFbnRpdHktUmVsYXRpb25zaGlwIE1vZGVsICBDaGFwdGVyIDg6IFJlbGF0aW9uYWwgRGF0YWJhc2UgRGVzaWduICBDaGFwdGVyIDk6IEFwcGxpY2F0aW9uIERlc2lnbiBhbmQgRGV2ZWxvcG1lbnQgIENoYXB0ZXIgMTA6IFN0b3JhZ2UgYW5kIEZpbGUgU3RydWN0dXJlICBTZWN0aW9ucyAxMC4zLCAxMC40IGFuZCAxMC44IG9taXR0ZWQgQ2hhcHRlciAxMTogSW5kZXhpbmcgYW5kIEhhc2hpbmcgIENvdmVyIG9ubHkgU2VjdGlvbnMgMTEuMSB0aHJvdWdoIDExLjPvvIx3aXRoIGEgYnJpZWYgb3V0bGluZSBvZiBTZWN0aW9uIDExLjUgYW5kIDExLjYgQ2hhcHRlciAxMjogUXVlcnkgUHJvY2Vzc2luZyAgQ292ZXIgb25seSBTZWN0aW9uIDEyLjEgKE92ZXJ2aWV3KSAgQ2hhcHRlciAxNDogVHJhbnNhY3Rpb25zICBUcmFuc2FjdGlvbiBDb25jZXB0LCBUcmFuc2FjdGlvbiBTdGF0ZSwgQ29uY3VycmVudCBFeGVjdXRpb25zLCBDb25mbGljdCBTZXJpYWxpemFiaWxpdHkgSW50cm9kdWN0aW9uIHRvIG1ham9yIGRhdGFiYXNlIHByb2R1Y3RzOiBPcmFjbGUiLAogICAgICB9LAogICAgICBjb21tZW50czogW10sCiAgICB9OwogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnRva2VuKSB7CiAgICAgIC8vIOWKoOi9veaViOaenAogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJHEubG9hZGluZy5zaG93KCk7CiAgICAgIC8vIOiuvue9ruWumuaXtuWZqAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHsKICAgICAgICAgIC8vIOWmguaenOWIsOS6huaXtumXtOi/mOayoeacieWKoOi9veaIkOWKnwogICAgICAgICAgdGhpcy4kcS5ub3RpZnkoewogICAgICAgICAgICBtZXNzYWdlOiAi6K+35rGC6LaF5pe277yM6K+36YeN6K+VIiwKICAgICAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiLAogICAgICAgICAgICB0aW1lb3V0OiAiMjAwMCIsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHEubG9hZGluZy5oaWRlKCk7CiAgICAgICAgfQogICAgICB9LCA1MDAwKTsKCiAgICAgIHZhciBjb3Vyc2VSZXNwID0gYXdhaXQgZ2V0Q291cnNlSW5mbyh7CiAgICAgICAgY291cnNlSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5jb3Vyc2VJZCwKICAgICAgICB0ZWFjaGVySWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy50ZWFjaGVySWQsCiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4sCiAgICAgIH0pOwoKICAgICAgY29uc29sZS5sb2coImluIHJlY2VpdmluZyBjb3Vyc2VSZXNwICIsIGNvdXJzZVJlc3ApOwogICAgICBpZiAoY291cnNlUmVzcC5zdGF0dXMpIHsKICAgICAgICB0aGlzLmNvdXJzZUluZm8gPSB7CiAgICAgICAgICB0ZWFjaGVyOiBjb3Vyc2VSZXNwLnRlYWNoZXJOYW1lLAogICAgICAgICAgdGVhY2hlcklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudGVhY2hlcklkLAogICAgICAgICAgc2VjdGlvbjogY291cnNlUmVzcC5zZWN0aW9uLAogICAgICAgICAgZGVwYXJ0bWVudDogY291cnNlUmVzcC5kZXBhcnRtZW50LAogICAgICAgICAgY291cnNlSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5jb3Vyc2VJZCwKICAgICAgICAgIHRpdGxlOiBjb3Vyc2VSZXNwLmNvdXJzZU5hbWUsCiAgICAgICAgICBpbnRybzogY291cnNlUmVzcC5pbnRybywKICAgICAgICAgIGNyZWRpdDogY291cnNlUmVzcC5jcmVkaXQsCiAgICAgICAgICBpbWdQYXRoOiBjb3Vyc2VSZXNwLmNvdXJzZUltYWdlVXJsLAogICAgICAgIH07CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjb3Vyc2VJbmZvL3NldENvdXJzZUluZm8iLCB0aGlzLmNvdXJzZUluZm8pOwogICAgICB9CgogICAgICAvLyDmnI3liqHlmajmsqHkuobvvIHvvIEKICAgICAgdmFyIHJlc3AgPSBhd2FpdCBnZXRDb21tZW50KHsKICAgICAgICBjb3Vyc2VJZDogdGhpcy4kcm91dGUucGFyYW1zLmNvdXJzZUlkLAogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLAogICAgICB9KTsKICAgICAgdGhpcy5jb21tZW50cyA9IHJlc3AuZGF0YTE7CiAgICAgIHRoaXMuY29tbWVudG9yID0gcmVzcC5kYXRhMjsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjb3Vyc2VJbmZvL3NldENvdXJzZUluZm8iLCB7CiAgICAgICAgY291cnNlSW5mbzogdGhpcy5jb3Vyc2VJbmZvLAogICAgICAgIHN0YXRpc3RpYzogdGhpcy5jb21tZW50U3RhdGlzdGljLAogICAgICB9KTsKCiAgICAgIC8vIOWKoOi9veWujOaIkAogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRxLmxvYWRpbmcuaGlkZSgpOwoKICAgICAgY29uc29sZS5sb2codGhpcy5pc0xvYWRpbmcpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["CourseInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"CourseInfo.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"row q-gutter-sm q-pa-md flex-center no-wrap items-stretch\">\n    <!-- <div class=\"col-lg-2 col-md-3 col-sm-3 col-xs-3 detail body-left\"> -->\n    <div class=\"detail body-left q-gutter-sm\">\n      <course-detail\n        refs=\"courseDeatil\"\n        :courseInfo=\"courseInfo\"\n        :commentStatistic=\"commentStatistic\"\n      />\n    </div>\n\n    <!-- <div class=\"col-lg-9 col-md-8 col-sm-8 col-xs-8 body-right\"> -->\n    <div class=\"body-right q-gutter-sm\">\n      <div class=\"course-head\">\n        <course-head :courseInfo=\"courseInfo\" />\n      </div>\n      <!-- 搜索栏 -->\n      <!-- <div class=\"option-group row justify-start q-gutter-sm\">\n        <q-select\n          v-model=\"order\"\n          label=\"选择排序方式\"\n          :options=\"orderOptions\"\n          style=\"width: 250px\"\n          behavior=\"menu\"\n        />\n        <q-select\n          v-model=\"dept\"\n          label=\"选择其他学院\"\n          :options=\"deptsOptions\"\n          style=\"width: 250px\"\n          behavior=\"menu\"\n        />\n      </div> -->\n\n      <div class=\"course-comment\">\n        <template v-if=\"comments.length > 0\">\n          <course-comment\n            v-for=\"(comment, i) in comments\"\n            :key=\"comment.commentid\"\n            :apiData=\"comment\"\n            :taker=\"commentor[i]\"\n          />\n        </template>\n        <template v-else class=\"row justify-between\">\n          <div class=\"text-h6\">暂时还没有人评价该课程哦！</div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getComment } from \"../services/commentService\";\nimport { getCourseInfo } from \"../services/courseService\";\nimport { mapState } from \"vuex\";\n\nimport CourseComment from \"../components/courseInfo/CourseComment\";\nimport CourseDetail from \"../components/courseInfo/CourseDetail\";\nimport CourseHead from \"../components/courseInfo/CourseHead\";\n\nexport default {\n  name: \"CourseInfo\",\n  components: {\n    CourseComment,\n    CourseDetail,\n    CourseHead,\n  },\n  computed: {\n    ...mapState(\"userInfo\", [\"token\", \"userInfo\"]),\n    commentStatistic() {\n      let statistic = {\n        reveiwCnt: 0,\n        content: 0,\n        teaching: 0,\n        grading: 0,\n        workload: 0,\n      };\n      statistic.reveiwCnt = this.comments.length;\n      for (let i = 0; i < statistic.reveiwCnt; i++) {\n        statistic.content += +this.comments[i].overall;\n        statistic.teaching += +this.comments[i].instructor;\n        statistic.grading += +this.comments[i].grading;\n        statistic.workload += +this.comments[i].workload;\n      }\n      statistic.content /= statistic.reveiwCnt;\n      statistic.teaching /= statistic.reveiwCnt;\n      statistic.grading /= statistic.reveiwCnt;\n      statistic.workload /= statistic.reveiwCnt;\n\n      statistic.content = statistic.content.toFixed(1);\n      statistic.teaching = statistic.teaching.toFixed(1);\n      statistic.grading = statistic.grading.toFixed(1);\n      statistic.workload = statistic.workload.toFixed(1);\n\n      return statistic;\n    },\n  },\n  data() {\n    return {\n      text: \"\",\n      logoPath: require(\"../assets/TJU.png\"),\n      avatarPath: require(\"../assets/boy-avatar.png\"),\n      avatarBGPath: require(\"../assets/material.png\"),\n\n      courseInfo: {\n        title: \"数据库原理与应用\",\n        teacher: \"袁时金\",\n        courseId: \"420244\",\n        section: \"2020 春\",\n        department: \"软件学院\",\n        credit: \"4\",\n        sections: [\"2020-春\"],\n        syllabus:\n          \"Chapter 1: Introduction Chapter 2: Introducation to the Relational Model Chapter 3: Intoduction to SQL Chapter 4: Intermediate SQLChapter 5: Advanced SQL Sections 5.4 onwards omitted. Chapter 6: Other Relational Languages Section 6.1 (Relational Algebra) covered in brief，Sections 6.2 and 6.3 omitted Chapter 7: Entity-Relationship Model  Chapter 8: Relational Database Design  Chapter 9: Application Design and Development  Chapter 10: Storage and File Structure  Sections 10.3, 10.4 and 10.8 omitted Chapter 11: Indexing and Hashing  Cover only Sections 11.1 through 11.3，with a brief outline of Section 11.5 and 11.6 Chapter 12: Query Processing  Cover only Section 12.1 (Overview)  Chapter 14: Transactions  Transaction Concept, Transaction State, Concurrent Executions, Conflict Serializability Introduction to major database products: Oracle\",\n      },\n      comments: [],\n    };\n  },\n  async created() {\n    if (this.token) {\n      // 加载效果\n      this.isLoading = true;\n      this.$q.loading.show();\n      // 设置定时器\n      setTimeout(() => {\n        if (this.isLoading) {\n          // 如果到了时间还没有加载成功\n          this.$q.notify({\n            message: \"请求超时，请重试\",\n            position: \"center\",\n            timeout: \"2000\",\n          });\n          this.$q.loading.hide();\n        }\n      }, 5000);\n\n      var courseResp = await getCourseInfo({\n        courseId: this.$route.params.courseId,\n        teacherId: this.$route.params.teacherId,\n        token: this.token,\n      });\n\n      console.log(\"in receiving courseResp \", courseResp);\n      if (courseResp.status) {\n        this.courseInfo = {\n          teacher: courseResp.teacherName,\n          teacherId: this.$route.params.teacherId,\n          section: courseResp.section,\n          department: courseResp.department,\n          courseId: this.$route.params.courseId,\n          title: courseResp.courseName,\n          intro: courseResp.intro,\n          credit: courseResp.credit,\n          imgPath: courseResp.courseImageUrl,\n        };\n        this.$store.commit(\"courseInfo/setCourseInfo\", this.courseInfo);\n      }\n\n      // 服务器没了！！\n      var resp = await getComment({\n        courseId: this.$route.params.courseId,\n        token: this.token,\n      });\n      this.comments = resp.data1;\n      this.commentor = resp.data2;\n      this.$store.commit(\"courseInfo/setCourseInfo\", {\n        courseInfo: this.courseInfo,\n        statistic: this.commentStatistic,\n      });\n\n      // 加载完成\n      this.isLoading = false;\n      this.$q.loading.hide();\n\n      console.log(this.isLoading);\n    }\n  },\n};\n</script>\n\n<style scoped>\n.body-right .course-comment {\n  margin-top: 15px;\n}\n.body-right {\n  min-width: 60%;\n}\n\n.body-right .option-group {\n  margin-top: 15px;\n  max-width: 80px;\n}\n\n.body-right .option-group .btn {\n  margin-top: 10px;\n}\n</style>"]}]}