{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/layout/layout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/layout/layout.vue","mtime":1600434941000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEcmF3ZXJCdG5QZW5hbCBmcm9tICIuL0RyYXdlckJ0blBlbmFsIjsKaW1wb3J0IERyYXdlckJ0biBmcm9tICIuL0RyYXdlckJ0biI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBEcmF3ZXJCdG5QZW5hbCwKICAgIERyYXdlckJ0biwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0ZXh0OiAiIiwKICAgICAgYWN0aXZlOiAtMSwKICAgICAgbWluaVN0YXRlOiB0cnVlLAogICAgICAvL1RPREUgREVCVUcKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgbG9nb1BhdGg6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9USlUucG5nIiksCiAgICAgIGF2YXRhclBhdGg6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9ib3ktYXZhdGFyLnBuZyIpLAogICAgICBhdmF0YXJCR1BhdGg6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9tYXRlcmlhbC5wbmciKSwKICAgIH07CiAgfSwKICBwcm9wczoge30sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJ1c2VySW5mbyIsIFsiaXNMb2FkaW5nIiwgInRva2VuIiwgInVzZXJJbmZvIl0pLAogIH0sCiAgbWV0aG9kczogewogICAgZGVidWcoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ0aGlzIiwgdGhpcy51c2VySW5mby51c2VySWQpOwogICAgfSwKICAgIGhhbmRsZVRvcFNlYXJjaCgpIHsKICAgICAgLy8g5aaC5p6c5b2T5YmN6aG16Z2i5LiN5piv6K++56iL5pCc57Si6aG16Z2iCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiU2VhcmNoQ291cnNlIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGtleXdvcmQ6IHRoaXMudGV4dCwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSb3V0ZShwYXlsb2FkKSB7CiAgICAgIGNvbnNvbGUubG9nKCJoYW5kbGUgcm91dGUgY2hhbmdlIiwgcGF5bG9hZCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiBwYXlsb2FkLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgdXNlcklkOiBwYXlsb2FkLnVzZXJpZCwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBoYW5kbGVMb2dvdXQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjbGlja2luZyBsb2dvdXQgYnRuIik7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VySW5mby9sb2dvdXRVc2VyIik7CiAgICAgIC8vIOaIkOWKn+mAgOWHugogICAgICBpZiAodGhpcy50b2tlbiA9PSBudWxsKSB7CiAgICAgICAgY29uc29sZS5sb2coImxvZ291dCB1c2VyIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJpbmRleCIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["layout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"layout.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n  <q-layout view=\"hHh lpR fFf\">\n    <q-header reveal class=\"bg-primary text-white\" height-hint=\"98\">\n      <!-- 功能按钮 -->\n      <q-toolbar>\n        <q-btn dense flat round icon=\"menu\" @click=\"drawer = !drawer\" />\n        <q-toolbar-title class=\"title\">\n          TJSPACE · 同济大学社群\n        </q-toolbar-title>\n\n        <!-- 登录|注册 -->\n        <!-- 三种情况！ -->\n        <!-- 1.正在登录中 加载 -->\n\n        <!-- 登录成功 -->\n        <template v-if=\"userInfo\">\n          <template class=\"flex-left\">\n            <div class=\"text-caption\">欢迎您！{{ userInfo.nickname }}</div>\n            <q-input\n              dark\n              dense\n              standout\n              v-model=\"text\"\n              @keydown.13=\"handleTopSearch()\"\n              input-class=\"text-left\"\n              class=\"q-ml-md\"\n              placeholder=\"发现更多课程\"\n            >\n              <template v-slot:append>\n                <q-icon v-if=\"text === ''\" name=\"search\" />\n                <q-icon\n                  v-else\n                  name=\"clear\"\n                  class=\"cursor-pointer\"\n                  @click=\"text = ''\"\n                />\n              </template>\n            </q-input>\n\n            <!-- 空格间隙 -->\n            <q-space />\n          </template>\n          <q-btn-group class=\"top-option\" flat>\n            <q-btn\n              class=\"search-course-btn\"\n              flat\n              :to=\"{\n                name: 'Homepage',\n                params: {\n                  userId: userInfo.userid,\n                },\n              }\"\n              label=\"个人主页\"\n            />\n            <q-btn\n              class=\"search-course-btn\"\n              flat\n              :to=\"{\n                name: 'SearchCourseNoKeyword',\n                \n              }\"\n              label=\"搜索课程\"\n            />\n            <q-btn\n              class=\"BBS-btn\"\n              flat\n              :to=\"{ name: 'BBSHomepage' }\"\n              label=\"同济BBS\"\n            />\n            <q-btn\n              class=\"logout-btn\"\n              flat\n              @click=\"handleLogout()\"\n              label=\"退出登录\"\n            />\n          </q-btn-group>\n        </template>\n\n        <!-- 没有登录状态 -->\n        <template v-else>\n          <q-btn-group class=\"top-option\" flat>\n            <q-btn stretch label=\"现在登录\" :to=\"{ name: 'login' }\" />\n            <q-btn label=\"马上注册\" :to=\"{ name: 'register' }\" />\n          </q-btn-group>\n        </template>\n      </q-toolbar>\n\n      <!-- 路径导航 -->\n      <!-- <q-bar  v-show=\"routes\" dense shrink class=\"bg-primary nav-route q-pl-md q-pb-md\">\n        <q-breadcrumbs active-color=\"white\" style=\"font-size: 10pt\">\n          <q-breadcrumbs-el v-for=\"(route, i) in routes\" :key=\"i\" dense label=\"个人主页\" icon=\"bookmarks\" />\n        </q-breadcrumbs>\n      </q-bar> -->\n    </q-header>\n\n    <!-- 侧边栏 -->\n    <q-drawer\n      class=\"drawer\"\n      flat\n      overlay\n      content-class=\"bg-grey-3\"\n      :mini=\"miniState\"\n      @mouseover=\"miniState = false\"\n      @mouseout=\"miniState = true\"\n      dense\n      :mini-width=\"61\"\n      :width=\"181\"\n      :breakpoint=\"500\"\n      v-model=\"drawer\"\n    >\n      <!-- 完全展开模式的展示 -->\n      <template>\n        <!-- 头部的背景图片和用户信息、头像 -->\n        <q-img class=\"absolute-top\" :src=\"avatarBGPath\" style=\"height: 130px\">\n          <div class=\"absolute-bottom bg-transparent drawer-top\">\n            <q-avatar size=\"36pt\" class=\"q-mb-sm avatar\">\n              <img :src=\"avatarPath\" />\n            </q-avatar>\n\n            <template v-if=\"userInfo\">\n              <div class=\"text-weight-bold\" v-show=\"!miniState\">\n                {{ \"欢迎你！\" + userInfo.nickname }}\n              </div>\n              <!-- 这个没存user的Email啊 -->\n              <!-- <div>{{ userInfo.eMail }}</div> -->\n            </template>\n\n            <template v-else>\n              <div class=\"text-weight-bold\">请先登录</div>\n            </template>\n          </div>\n        </q-img>\n\n        <q-scroll-area\n          style=\"\n            height: calc(100% - 130px);\n            margin-top: 130px;\n            border-right: 1px solid #ddd;\n          \"\n        >\n          <q-list>\n            <!-- 用户登录后显示 -->\n            <template v-if=\"userInfo\">\n              <drawer-btn\n                :label=\"'个人主页'\"\n                @click=\"debug()\"\n                :to=\"{\n                  name: 'Homepage',\n                  params: {\n                    userId: userInfo.userid,\n                  },\n                }\"\n                :icon=\"'home'\"\n              />\n            </template>\n\n            <!-- 用户不登录显示 -->\n            <template>\n              <drawer-btn\n                :label=\"'同济BBS'\"\n                :to=\"{ name: 'BBSHomepage' }\"\n                :icon=\"'forum'\"\n              />\n              <drawer-btn\n                :label=\"'搜索课程'\"\n                :to=\"{ name: 'SearchCourseNoKeyword'}\"\n                :icon=\"'search'\"\n              />\n            </template>\n\n            <template class=\"drawer-btn-penal flex-left\">\n              <drawer-btn-penal />\n            </template>\n          </q-list>\n        </q-scroll-area>\n      </template>\n    </q-drawer>\n\n    <q-page-container class=\"body\">\n      <!-- 你的内容将会被插入在这里 -->\n      <slot v-if=\"!isLoading\" name=\"main\"></slot>\n    </q-page-container>\n\n    <!-- footer -->\n    <q-footer reveal bordered class=\"bg-grey-8 text-white page-footer\">\n      <q-toolbar>\n        <span class=\"footer-name\">TJSPACE·同济大学社群</span>\n        <span class=\"footer-id\">津ICP备20006438号</span>\n      </q-toolbar>\n    </q-footer>\n  </q-layout>\n</template>\n\n<script>\nimport DrawerBtnPenal from \"./DrawerBtnPenal\";\nimport DrawerBtn from \"./DrawerBtn\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: {\n    DrawerBtnPenal,\n    DrawerBtn,\n  },\n  data() {\n    return {\n      text: \"\",\n      active: -1,\n      miniState: true,\n      //TODE DEBUG\n      drawer: false,\n      logoPath: require(\"../../assets/TJU.png\"),\n      avatarPath: require(\"../../assets/boy-avatar.png\"),\n      avatarBGPath: require(\"../../assets/material.png\"),\n    };\n  },\n  props: {},\n  computed: {\n    ...mapState(\"userInfo\", [\"isLoading\", \"token\", \"userInfo\"]),\n  },\n  methods: {\n    debug() {\n      console.log(\"this\", this.userInfo.userId);\n    },\n    handleTopSearch() {\n      // 如果当前页面不是课程搜索页面\n      this.$router.push({\n        name: \"SearchCourse\",\n        params: {\n          keyword: this.text,\n        },\n      });\n    },\n    handleRoute(payload) {\n      console.log(\"handle route change\", payload);\n      this.$router.push({\n        name: payload,\n        params: {\n          userId: payload.userid,\n        },\n      });\n    },\n    async handleLogout() {\n      console.log(\"clicking logout btn\");\n      await this.$store.dispatch(\"userInfo/logoutUser\");\n      // 成功退出\n      if (this.token == null) {\n        console.log(\"logout user successfully\");\n        this.$router.push({\n          name: \"index\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.body {\n  width: 100%;\n  margin: 0 auto;\n}\n\n.logout-btn {\n  margin-left: 10px;\n}\n.drawer {\n  background-color: rgb(245, 246, 247);\n}\n.drawer-top {\n  font-size: 0.8em;\n  padding-left: 0.4em;\n  padding-right: 0;\n}\n.header .header-search {\n  color: aliceblue;\n}\n.page-footer .footer-name {\n  margin-left: 10px;\n  font-size: 16px;\n}\n.page-footer .footer-id {\n  position: absolute;\n  right: 15px;\n  font-size: 16px;\n}\n</style>\n\n"]}]}