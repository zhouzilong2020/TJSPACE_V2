{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/SelfInfoModify.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/SelfInfoModify.vue","mtime":1600430746000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRleHQtc3VidGl0bGUyIHsKICBtYXJnaW4tdG9wOiA0MHB0Owp9Ci5iYWNrZ3JvdW5kIHsKICBiYWNrZ3JvdW5kOiB1cmwoIi4uL2Fzc2V0cy9USlVfMi5wbmciKTsKICBiYWNrZ3JvdW5kLXNpemU6IDMwMHB4IDMwMHB4OwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["SelfInfoModify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelfInfoModify.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"card\" style=\"width: 400pt; margin: 0 auto; margin-top: 50pt\">\n    <q-card class=\"my-card\">\n      <q-card-section>\n        <div class=\"text-h6\">个人信息</div>\n      </q-card-section>\n\n      <q-separator />\n\n      <q-card-section class=\"background\">\n        <!-- <div class='background' style=\"z-index:-1; \">\n          <img :src=\"LogoImg\" width=\"100%\" height=\"100%\" alt=\"\" />\n        </div> -->\n\n        <div style=\"z-index: 1\">\n          <div class=\"text-subtitle2\" style=\"height: 20pt; margin-top: 10pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                昵称\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-input\n                  rounded\n                  outlined\n                  v-model=\"Nickname\"\n                  label=\"Nickname\"\n                  value=\"Nickname\"\n                  style=\"width: 150pt\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"text-subtitle2\" style=\"height: 20pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                性别\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-select\n                  rounded\n                  outlined\n                  v-model=\"Gender\"\n                  :options=\"OptionGender\"\n                  label=\"Gender\"\n                  style=\"width: 150pt\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"text-subtitle2\" style=\"height: 20pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                手机号\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-input\n                  rounded\n                  outlined\n                  v-model=\"phoneNumber\"\n                  :options=\"phoneNumber\"\n                  label=\"phoneNumber\"\n                  style=\"width: 150pt\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"text-subtitle2\" style=\"height: 20pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                年级\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-select\n                  rounded\n                  outlined\n                  v-model=\"Grade\"\n                  :options=\"OptionGrade\"\n                  label=\"Grade\"\n                  style=\"width: 150pt\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"text-subtitle2\" style=\"height: 20pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                主修专业\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-select\n                  rounded\n                  outlined\n                  v-model=\"Major\"\n                  :options=\"OptionMajor\"\n                  label=\"Major\"\n                  style=\"width: 150pt\"\n                  value=\"OptionMajor\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"text-subtitle2\" style=\"height: 20pt; margin-bottom: 30pt\">\n            <div class=\"row items-center\">\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                学历\n              </div>\n              <div class=\"col-6 justify-evenly\" style=\"text-align: center\">\n                <q-select\n                  rounded\n                  outlined\n                  v-model=\"Degree\"\n                  :options=\"OptionDegree\"\n                  label=\"Degree\"\n                  style=\"width: 150pt\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </q-card-section>\n\n      <q-separator />\n      <!-- 这里跳转回主页之后主页的信息不会刷新 -->\n      <div class=\"row\">\n        <q-btn\n          label=\"Submit\"\n          type=\"submit\"\n          color=\"primary\"\n          class=\"col-6\"\n          @click=\"submit()\"\n          :to=\"{ name: 'Homepage' }\"\n        />\n        <q-btn\n          label=\"Reset\"\n          type=\"reset\"\n          color=\"primary\"\n          flat\n          class=\"q-ml-sm col-5\"\n          @click=\"reset()\"\n        />\n      </div>\n    </q-card>\n    <br />\n    <br />\n    <br />\n    <br />\n  </div>\n</template>\n\n\n\n\n<script>\nimport { mapState } from \"vuex\";\n// import { token } from \"../services/config\";\nimport axios from \"axios\";\n// import axios from 'axios'\nexport default {\n  components: {},\n  name: \"SelfInfoModify\",\n  props: {\n    SelfInfo: {\n      type: Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      LogoImg: require(\"../assets/TJU.png\"),\n\n      OptionGender: [\"男\", \"女\"],\n      OptionGrade: [\"大一\", \"大二\", \"大三\", \"大四\", \"研一\", \"研二\", \"博士\"],\n      OptionMajor: [\"软件工程\", \"土木工程\", \"经济与管理\"],\n      OptionDegree: [\"本科生\", \"研究生\", \"博士生\"],\n      Nickname: \"\",\n      Gender: \"\",\n      phoneNumber: \"\",\n      Grade: \"\",\n      Major: \"\",\n      Degree: \"\",\n      information: {\n        userId: \"\",\n        nickname: \"\",\n        gender: -1,\n        phoneNumber: \"\",\n        majorId: \"\",\n        year: -1,\n        degree: -1,\n      },\n    };\n  },\n  methods: {\n    submit() {\n      // console.log('token：',token)\n      this.getInfo();\n      this.$store.dispatch(\"userInfo/modifyUserInfo\", {\n        ...this.information,\n        token: this.token,\n      });\n      console.log(\"in selfinfo\", this.information);\n      alert(\"Information Modified!\");\n    },\n    reset() {\n      this.InitInfo();\n    },\n    getInfo() {\n      this.information.userId = this.userInfo.userid;\n      this.information.nickname = this.Nickname;\n      switch (this.Gender) {\n        case \"男\":\n          this.information.gender = 0;\n          break;\n        case \"女\":\n          this.information.gender = 1;\n          break;\n      }\n      this.information.phoneNumber = this.phoneNumber;\n      switch (this.Major) {\n        case \"软件工程\":\n          this.information.majorId = \"1\";\n          break;\n        case \"土木工程\":\n          this.information.majorId = \"2\";\n          break;\n        case \"经济与管理\":\n          this.information.majorId = \"3\";\n          break;\n      }\n      switch (this.Grade) {\n        case \"大一\":\n          this.information.year = 1;\n          break;\n        case \"大二\":\n          this.information.year = 2;\n          break;\n        case \"大三\":\n          this.information.year = 3;\n          break;\n        case \"大四\":\n          this.information.year = 4;\n          break;\n      }\n      switch (this.Degree) {\n        case \"本科生\":\n          this.information.degree = 1;\n          break;\n        case \"研究生\":\n          this.information.degree = 2;\n          break;\n        case \"博士生\":\n          this.information.degree = 3;\n          break;\n      }\n    },\n    InitInfo() {\n      this.Nickname = this.userInfo.nickname;\n      switch (this.userInfo.gender) {\n        case 0:\n          this.Gender = \"男\";\n          break;\n        case 1:\n          this.Gender = \"女\";\n          break;\n      }\n      this.phoneNumber = this.userInfo.phonenumber;\n      switch (this.userInfo.majorid) {\n        case \"1\":\n          this.Major = \"软件工程\";\n          break;\n        case \"2\":\n          this.Major = \"土木工程\";\n          break;\n        case \"3\":\n          this.Major = \"经济与管理\";\n          break;\n      }\n      switch (this.userInfo.year) {\n        case 1:\n          this.Grade = \"大一\";\n          break;\n        case 2:\n          this.Grade = \"大二\";\n          break;\n        case 3:\n          this.Grade = \"大三\";\n          break;\n        case 4:\n          this.Grade = \"大四\";\n          break;\n      }\n      switch (this.userInfo.degree) {\n        case 1:\n          this.Degree = \"本科生\";\n          break;\n        case 2:\n          this.Degree = \"研究生\";\n          break;\n        case 3:\n          this.Degreer = \"博士生\";\n          break;\n      }\n    },\n    async changeInfo() {\n      let res = await axios({\n        method: \"post\",\n        url: \"http://175.24.115.240:8080/api/Modify/Info\",\n        headers: {\n          Authorization: this.token,\n        },\n        data: {\n          userid: this.information.userId,\n          nickname: this.information.nickname,\n          gender: this.information.gender,\n          phonenumber: this.information.phoneNumber,\n          majorid: this.information.majorId,\n          year: this.information.year,\n          degree: this.information.degree,\n        },\n      });\n      console.log(\"new phone:\", this.information.phoneNumber);\n      console.log(\"put action\", res);\n    },\n  },\n  computed: mapState(\"userInfo\", [\"userInfo\", 'token']),\n  created() {\n    this.InitInfo();\n  },\n};\n</script>\n\n\n<style >\n.text-subtitle2 {\n  margin-top: 40pt;\n}\n.background {\n  background: url(\"../assets/TJU_2.png\");\n  background-size: 300px 300px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n</style>"]}]}