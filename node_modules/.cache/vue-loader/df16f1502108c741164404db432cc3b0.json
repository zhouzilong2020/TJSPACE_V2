{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/BBSHomePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/BBSHomePage.vue","mtime":1600410882000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsNCg0KY29uc3QgVVJMID0gImh0dHA6Ly8xNzUuMjQuMTE1LjI0MDo4MDgwL2FwaS8iOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYmdQYXRoOiByZXF1aXJlKCIuLi9hc3NldHMvYmJzQmFja2dyb3VuZC5wbmciKSwNCiAgICAgIHRqdUxvZ286IHJlcXVpcmUoIi4uL2Fzc2V0cy9USlUucG5nIiksDQogICAgICBpc01ha2luZ1Bvc3Q6IGZhbHNlLA0KICAgICAgcG9zdENvbnRlbnQ6ICIiLA0KICAgICAgcG9zdEluZm86IFtdLA0KICAgICAgLy/pu5jorqTku6Xlj5HluJbml7bpl7TmjpLluo8NCiAgICAgIG9yZGVyVHlwZTogMywNCiAgICAgIGN1cnJQYWdlOiAwLA0KICAgICAgaXNCb3R0b206IGZhbHNlLA0KICAgICAgdXNlcklkOiAiIiwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKCJ1c2VySW5mbyIsIFsidG9rZW4iLCAidXNlckluZm8iXSksDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0VXNlckluZm86IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy51c2VySWQgPSB0aGlzLnVzZXJJbmZvLnVzZXJpZDsNCiAgICB9LA0KICAgIGp1bXBXaGlsZU5vdFJlZ2lzdGVyOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLnVzZXJJZCA9PSAiIikgew0KICAgICAgICBjb25zb2xlLmxvZygiYWRhYWFzZGEiKTsNCiAgICAgICAgLy90aGlzLiRyb3V0ZXIucHVzaCgnaW5kZXgnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG1ha2VOZXdQb3N0OiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuaXNNYWtpbmdQb3N0ID0gdHJ1ZTsNCiAgICB9LA0KICAgIGNhbmNlbFBvc3Q6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5pc01ha2luZ1Bvc3QgPSBmYWxzZTsNCiAgICAgIHRoaXMucG9zdENvbnRlbnQgPSAiIjsNCiAgICB9LA0KICAgIHN1Ym1pdFBvc3Q6IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIHJlc3AgPSBhd2FpdCBheGlvcy5wb3N0KA0KICAgICAgICBVUkwgKyBgUG9zdC9wb3N0YCwNCiAgICAgICAge30sDQogICAgICAgIHsNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLA0KICAgICAgICAgIH0sDQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICB0aXRsZTogdGhpcy5wb3N0Q29udGVudC5zdWJzdHIoMCwgNDApLA0KICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3N0Q29udGVudCwNCiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgfSwNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIGNvbnNvbGUubG9nKHJlc3ApOw0KICAgICAgdGhpcy5pc01ha2luZ1Bvc3QgPSBmYWxzZTsNCiAgICAgIHRoaXMucG9zdENvbnRlbnQgPSAiIjsNCg0KICAgICAgdGhpcy5jbGVhblBhZ2UoKTsNCiAgICAgIHRoaXMuZ2V0UG9zdHModGhpcy5vcmRlclR5cGUsIHRoaXMuY3VyclBhZ2UpOw0KICAgICAgdGhpcy5jdXJyUGFnZSsrOw0KICAgIH0sDQogICAgbWFrZU9yZGVyOiBmdW5jdGlvbih0eXBlKSB7DQogICAgICBpZiAodHlwZSA9PSAwKSB7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvcmRlclR5cGUwIikuc3R5bGUuYmFja2dyb3VuZCA9ICIjMDA0MDgwIjsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9yZGVyVHlwZTMiKS5zdHlsZS5iYWNrZ3JvdW5kID0gIiMyMjVjYTYiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9yZGVyVHlwZTMiKS5zdHlsZS5iYWNrZ3JvdW5kID0gIiMwMDQwODAiOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3JkZXJUeXBlMCIpLnN0eWxlLmJhY2tncm91bmQgPSAiIzIyNWNhNiI7DQogICAgICB9DQogICAgICB0aGlzLm9yZGVyVHlwZSA9IHR5cGU7DQogICAgICB0aGlzLmNsZWFuUGFnZSgpOw0KICAgICAgdGhpcy5nZXRQb3N0cyh0aGlzLm9yZGVyVHlwZSwgdGhpcy5jdXJyUGFnZSk7DQogICAgICB0aGlzLmN1cnJQYWdlKys7DQogICAgfSwNCiAgICBqdW1wVG9Qb3N0OiBmdW5jdGlvbihpbmRleCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAiRm9ydW0iLA0KICAgICAgICBwYXJhbXM6IHsgcG9zdElkOiB0aGlzLnBvc3RJbmZvW2luZGV4XS5wb3N0SWQgfSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgdGh1bWJVcDogYXN5bmMgZnVuY3Rpb24oaW5kZXgpIHsNCiAgICAgIHZhciBldmFsdWF0YWJsZSA9IHRydWU7DQogICAgICBhd2FpdCBheGlvcw0KICAgICAgICAuZ2V0KFVSTCArIGBQb3N0L0NhbkV2YWx1YXRlYCwgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sDQogICAgICAgICAgfSwNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SW5mb1tpbmRleF0ucG9zdElkLA0KICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwNCiAgICAgICAgICB9LA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXR1cm46IiArIHJlc3AuZGF0YS5jYW5FdmFsdWF0ZSk7DQogICAgICAgICAgaWYgKCFyZXNwLmRhdGEuY2FuRXZhbHVhdGUpIHsNCiAgICAgICAgICAgIGV2YWx1YXRhYmxlID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIGlmICghZXZhbHVhdGFibGUpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgYXhpb3MucG9zdCgNCiAgICAgICAgVVJMICsgYFBvc3QvZXZhbHVhdGVgLA0KICAgICAgICB7fSwNCiAgICAgICAgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sDQogICAgICAgICAgfSwNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SW5mb1tpbmRleF0ucG9zdElkLA0KICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwNCiAgICAgICAgICAgIHR5cGU6IDEsDQogICAgICAgICAgfSwNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIHRoaXMucG9zdEluZm9baW5kZXhdLmFncmVlQWNjb3VudCsrOw0KICAgICAgdGhpcy5wb3N0SW5mb1tpbmRleF0uY2FuVGh1bWIgPSAwOw0KICAgIH0sDQogICAgdGh1bWJEb3duOiBhc3luYyBmdW5jdGlvbihpbmRleCkgew0KICAgICAgdmFyIGV2YWx1YXRhYmxlID0gdHJ1ZTsNCiAgICAgIGF3YWl0IGF4aW9zDQogICAgICAgIC5nZXQoVVJMICsgYFBvc3QvQ2FuRXZhbHVhdGVgLCB7DQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy50b2tlbiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgcG9zdElkOiB0aGlzLnBvc3RJbmZvW2luZGV4XS5wb3N0SWQsDQogICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgIH0sDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgICAgaWYgKCFyZXNwLmRhdGEuY2FuRXZhbHVhdGUpIHsNCiAgICAgICAgICAgIGV2YWx1YXRhYmxlID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIGlmICghZXZhbHVhdGFibGUpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdmFyIHJlc3AgPSBheGlvcy5wb3N0KA0KICAgICAgICBVUkwgKyBgUG9zdC9ldmFsdWF0ZWAsDQogICAgICAgIHt9LA0KICAgICAgICB7DQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy50b2tlbiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgcG9zdElkOiB0aGlzLnBvc3RJbmZvW2luZGV4XS5wb3N0SWQsDQogICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgICAgdHlwZTogMCwNCiAgICAgICAgICB9LA0KICAgICAgICB9DQogICAgICApOw0KICAgICAgY29uc29sZS5sb2cocmVzcCk7DQogICAgICB0aGlzLnBvc3RJbmZvW2luZGV4XS5hZ3JlZUFjY291bnQtLTsNCiAgICAgIHRoaXMucG9zdEluZm9baW5kZXhdLmNhblN0ZXAgPSAwOw0KICAgIH0sDQogICAgY2xlYW5QYWdlOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMucG9zdEluZm8ubGVuZ3RoID0gMDsNCiAgICAgIHRoaXMuY3VyclBhZ2UgPSAwOw0KICAgICAgdGhpcy5pc0JvdHRvbSA9IGZhbHNlOw0KICAgIH0sDQogICAgZ2V0UG9zdHM6IGFzeW5jIGZ1bmN0aW9uKHR5cGUsIHBhZ2UpIHsNCiAgICAgIGNvbnNvbGUubG9nKHBhZ2UpOw0KICAgICAgYXdhaXQgYXhpb3MNCiAgICAgICAgLmdldChVUkwgKyBgU2hvdy9nZXRQb3N0c2AsIHsNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLA0KICAgICAgICAgIH0sDQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICBvcmRlclR5cGU6IHR5cGUsDQogICAgICAgICAgICBzdGFydFBvc2l0aW9uOiBwYWdlICogMTIsDQogICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgIH0sDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhLnBvc3RzKTsNCiAgICAgICAgICB2YXIgcG9zdHMgPSByZXNwLmRhdGEucG9zdHM7DQogICAgICAgICAgaWYgKHBvc3RzLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICB0aGlzLmlzQm90dG9tID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmFyIHRlbXBQb3N0ID0gew0KICAgICAgICAgICAgICBwb3N0ZXJOYW1lOiBwb3N0c1tpXS5uaWNrbmFtZSwNCiAgICAgICAgICAgICAgcG9zdENvbnRlbnQ6IHBvc3RzW2ldLnRpdGxlLA0KICAgICAgICAgICAgICBhZ3JlZUFjY291bnQ6IHBvc3RzW2ldLnVzZWZ1bE51bSAtIHBvc3RzW2ldLnVzZWxlc3NOdW0sDQogICAgICAgICAgICAgIGxhdGVzdENvbW1lbnRUaW1lOiBwb3N0c1tpXS5sYXRlc3RSZXBseS5yZXBsYWNlKCJUIiwgIi8iKSwNCiAgICAgICAgICAgICAgY29tbWVudEFjY291bnQ6IHBvc3RzW2ldLm51bU9mUmVwbHksDQogICAgICAgICAgICAgIHBvc3RJZDogcG9zdHNbaV0ucG9zdElkLA0KICAgICAgICAgICAgICBjYW5TdGVwOiBwb3N0c1tpXS5jYW5TdGVwLA0KICAgICAgICAgICAgICBjYW5UaHVtYjogcG9zdHNbaV0uY2FuVGh1bWIsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy5wb3N0SW5mby5wdXNoKHRlbXBQb3N0KTsNCiAgICAgICAgICAgIC8v5aaC5p6c5Yiw5bqV5LqGDQogICAgICAgICAgICBpZiAocG9zdHMubGVuZ3RoIDwgMTIpIHsNCiAgICAgICAgICAgICAgdGhpcy5pc0JvdHRvbSA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LCAvL2VuZCBnZXQgcG9zdA0KICAgIG9uTG9hZChpbmRleCwgZG9uZSkgew0KICAgICAgaWYgKHRoaXMuaXNCb3R0b20pIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMuZ2V0UG9zdHModGhpcy5vcmRlclR5cGUsIHRoaXMuY3VyclBhZ2UpOw0KICAgICAgICB0aGlzLmN1cnJQYWdlKys7DQogICAgICAgIGRvbmUoKTsNCiAgICAgIH0sIDEwMDApOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0VXNlckluZm8oKTsNCiAgICAvLyB0aGlzLmp1bXBXaGlsZU5vdFJlZ2lzdGVyKCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["BBSHomePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BBSHomePage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <q-page>\r\n    <!-- title -->\r\n    <div class=\"row justify-center\" id=\"bbsTitle\">\r\n      <div class=\"col-8\">\r\n        <q-img :src=\"bgPath\" style=\"width: 100%\">\r\n          <div class=\"absolute-bottom-left\">\r\n            <p>\r\n              <q-img :src=\"tjuLogo\" style=\"width: 100%\" />\r\n              TJ SPACE-BBS\r\n            </p>\r\n          </div>\r\n        </q-img>\r\n      </div>\r\n    </div>\r\n    <div class=\"row justify-center\">\r\n      <div class=\"col-8\">\r\n        <!-- 发布主题贴 -->\r\n        <div v-show=\"isMakingPost\">\r\n          <q-input\r\n            v-model=\"postContent\"\r\n            label=\"输入你的想法\"\r\n            type=\"textarea\"\r\n            maxlength=\"100\"\r\n            counter\r\n            filled\r\n          >\r\n          </q-input>\r\n        </div>\r\n        <!-- 交互控件 -->\r\n        <div style=\"height: 3rem\">\r\n          <div style=\"float: right\">\r\n            <q-btn-group v-if=\"isMakingPost\">\r\n              <q-btn color=\"primary\" label=\"取消\" @click=\"cancelPost\" />\r\n              <q-btn color=\"primary\" label=\"确定\" @click=\"submitPost\" />\r\n            </q-btn-group>\r\n            <q-btn-group v-else>\r\n              <q-btn\r\n                style=\"background:#004080;color:white\"\r\n                label=\"按主题发布时间排序\"\r\n                id=\"orderType3\"\r\n                @click=\"makeOrder(3)\"\r\n              />\r\n              <q-btn\r\n                style=\"background:#225ca6;color:white\"\r\n                label=\"按最新评论时间排序\"\r\n                id=\"orderType0\"\r\n                @click=\"makeOrder(0)\"\r\n              />\r\n              <q-btn\r\n                color=\"primary\"\r\n                icon=\"add_comment\"\r\n                label=\"发布\"\r\n                @click=\"makeNewPost\"\r\n              />\r\n            </q-btn-group>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 帖子  放在list中显示-->\r\n    <div class=\"row justify-center\">\r\n      <div class=\"col-8\">\r\n        <q-card class=\"my-card\" style=\"padding:0\">\r\n          <q-card-section style=\"padding-left:0;padding-right:0\">\r\n            <q-list>\r\n              <q-infinite-scroll @load=\"onLoad\" :offset=\"100\">\r\n                <div v-for=\"(post, index) in postInfo\" :key=\"post.id\">\r\n                  <q-item clickable style=\"margin:0.5rem\">\r\n                    <!-- 主要内容 -->\r\n                    <q-item-section\r\n                      v-ripple\r\n                      clickable\r\n                      @click=\"jumpToPost(index)\"\r\n                    >\r\n                      <q-item-label style=\"font-size:1.125rem\">\r\n                        {{ post.postContent }}\r\n                      </q-item-label>\r\n                      <q-item-label caption style=\"font-size:1rem\">\r\n                        <q-icon name=\"person\" />\r\n                        {{ post.posterName }}\r\n                      </q-item-label>\r\n                      <q-item-label caption v-if=\"post.commentAccount\">\r\n                        最新评论于{{ post.latestCommentTime }}\r\n                        <br />\r\n                        {{ post.commentAccount }}评论\r\n                      </q-item-label>\r\n                      <q-item-label caption v-else>\r\n                        发布于{{ post.latestCommentTime }}\r\n                        <br />\r\n                        还没有人评论哦\r\n                      </q-item-label>\r\n                    </q-item-section>\r\n                    <!-- 交互 -->\r\n                    <q-item-section side top>\r\n                      <q-item-label>\r\n                        <q-btn\r\n                          v-if=\"post.canThumb\"\r\n                          flat\r\n                          icon=\"thumb_up\"\r\n                          @click=\"thumbUp(index)\"\r\n                        />\r\n                        <q-btn\r\n                          v-else\r\n                          flat\r\n                          icon=\"thumb_up\"\r\n                          color=\"red\"\r\n                          @click=\"thumbUp(index)\"\r\n                        />\r\n                        {{ post.agreeAccount }}\r\n                        <q-btn\r\n                          v-if=\"post.canStep\"\r\n                          flat\r\n                          icon=\"thumb_down\"\r\n                          @click=\"thumbDown(index)\"\r\n                        />\r\n                        <q-btn\r\n                          v-else\r\n                          flat\r\n                          icon=\"thumb_down\"\r\n                          color=\"black\"\r\n                          @click=\"thumbDown(index)\"\r\n                        />\r\n                      </q-item-label>\r\n                    </q-item-section>\r\n                  </q-item>\r\n                  <q-separator spaced inset />\r\n                </div>\r\n                <!-- 加载动画 -->\r\n                <template v-slot:loading v-if=\"!this.isBottom\">\r\n                  <div class=\"row justify-center q-my-md\">\r\n                    <q-spinner-dots color=\"primary\" size=\"40px\" />\r\n                  </div>\r\n                </template>\r\n              </q-infinite-scroll>\r\n            </q-list>\r\n          </q-card-section>\r\n        </q-card>\r\n      </div>\r\n    </div>\r\n  </q-page>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapState } from \"vuex\";\r\n\r\nconst URL = \"http://175.24.115.240:8080/api/\";\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      bgPath: require(\"../assets/bbsBackground.png\"),\r\n      tjuLogo: require(\"../assets/TJU.png\"),\r\n      isMakingPost: false,\r\n      postContent: \"\",\r\n      postInfo: [],\r\n      //默认以发帖时间排序\r\n      orderType: 3,\r\n      currPage: 0,\r\n      isBottom: false,\r\n      userId: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"userInfo\", [\"token\", \"userInfo\"]),\r\n  },\r\n  methods: {\r\n    initUserInfo: function() {\r\n      this.userId = this.userInfo.userid;\r\n    },\r\n    jumpWhileNotRegister: function() {\r\n      if (this.userId == \"\") {\r\n        console.log(\"adaaasda\");\r\n        //this.$router.push('index');\r\n      }\r\n    },\r\n    makeNewPost: function() {\r\n      this.isMakingPost = true;\r\n    },\r\n    cancelPost: function() {\r\n      this.isMakingPost = false;\r\n      this.postContent = \"\";\r\n    },\r\n    submitPost: async function() {\r\n      var resp = await axios.post(\r\n        URL + `Post/post`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            title: this.postContent.substr(0, 40),\r\n            content: this.postContent,\r\n            userId: this.userId,\r\n          },\r\n        }\r\n      );\r\n      console.log(resp);\r\n      this.isMakingPost = false;\r\n      this.postContent = \"\";\r\n\r\n      this.cleanPage();\r\n      this.getPosts(this.orderType, this.currPage);\r\n      this.currPage++;\r\n    },\r\n    makeOrder: function(type) {\r\n      if (type == 0) {\r\n        document.getElementById(\"orderType0\").style.background = \"#004080\";\r\n        document.getElementById(\"orderType3\").style.background = \"#225ca6\";\r\n      } else {\r\n        document.getElementById(\"orderType3\").style.background = \"#004080\";\r\n        document.getElementById(\"orderType0\").style.background = \"#225ca6\";\r\n      }\r\n      this.orderType = type;\r\n      this.cleanPage();\r\n      this.getPosts(this.orderType, this.currPage);\r\n      this.currPage++;\r\n    },\r\n    jumpToPost: function(index) {\r\n      this.$router.push({\r\n        name: \"Forum\",\r\n        params: { postId: this.postInfo[index].postId },\r\n      });\r\n    },\r\n    thumbUp: async function(index) {\r\n      var evaluatable = true;\r\n      await axios\r\n        .get(URL + `Post/CanEvaluate`, {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            postId: this.postInfo[index].postId,\r\n            userId: this.userId,\r\n          },\r\n        })\r\n        .then((resp) => {\r\n          console.log(\"return:\" + resp.data.canEvaluate);\r\n          if (!resp.data.canEvaluate) {\r\n            evaluatable = false;\r\n            return;\r\n          }\r\n        });\r\n      if (!evaluatable) {\r\n        return;\r\n      }\r\n      axios.post(\r\n        URL + `Post/evaluate`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            postId: this.postInfo[index].postId,\r\n            userId: this.userId,\r\n            type: 1,\r\n          },\r\n        }\r\n      );\r\n      this.postInfo[index].agreeAccount++;\r\n      this.postInfo[index].canThumb = 0;\r\n    },\r\n    thumbDown: async function(index) {\r\n      var evaluatable = true;\r\n      await axios\r\n        .get(URL + `Post/CanEvaluate`, {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            postId: this.postInfo[index].postId,\r\n            userId: this.userId,\r\n          },\r\n        })\r\n        .then((resp) => {\r\n          if (!resp.data.canEvaluate) {\r\n            evaluatable = false;\r\n            return;\r\n          }\r\n        });\r\n      if (!evaluatable) {\r\n        return;\r\n      }\r\n      var resp = axios.post(\r\n        URL + `Post/evaluate`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            postId: this.postInfo[index].postId,\r\n            userId: this.userId,\r\n            type: 0,\r\n          },\r\n        }\r\n      );\r\n      console.log(resp);\r\n      this.postInfo[index].agreeAccount--;\r\n      this.postInfo[index].canStep = 0;\r\n    },\r\n    cleanPage: function() {\r\n      this.postInfo.length = 0;\r\n      this.currPage = 0;\r\n      this.isBottom = false;\r\n    },\r\n    getPosts: async function(type, page) {\r\n      console.log(page);\r\n      await axios\r\n        .get(URL + `Show/getPosts`, {\r\n          headers: {\r\n            Authorization: this.token,\r\n          },\r\n          params: {\r\n            orderType: type,\r\n            startPosition: page * 12,\r\n            userId: this.userId,\r\n          },\r\n        })\r\n        .then((resp) => {\r\n          console.log(resp.data.posts);\r\n          var posts = resp.data.posts;\r\n          if (posts.length == 0) {\r\n            this.isBottom = true;\r\n          }\r\n          for (var i = 0; i < posts.length; i++) {\r\n            var tempPost = {\r\n              posterName: posts[i].nickname,\r\n              postContent: posts[i].title,\r\n              agreeAccount: posts[i].usefulNum - posts[i].uselessNum,\r\n              latestCommentTime: posts[i].latestReply.replace(\"T\", \"/\"),\r\n              commentAccount: posts[i].numOfReply,\r\n              postId: posts[i].postId,\r\n              canStep: posts[i].canStep,\r\n              canThumb: posts[i].canThumb,\r\n            };\r\n            this.postInfo.push(tempPost);\r\n            //如果到底了\r\n            if (posts.length < 12) {\r\n              this.isBottom = true;\r\n            }\r\n          }\r\n        });\r\n    }, //end get post\r\n    onLoad(index, done) {\r\n      if (this.isBottom) {\r\n        return;\r\n      }\r\n      setTimeout(() => {\r\n        this.getPosts(this.orderType, this.currPage);\r\n        this.currPage++;\r\n        done();\r\n      }, 1000);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initUserInfo();\r\n    // this.jumpWhileNotRegister();\r\n  },\r\n};\r\n</script>\r\n"]}]}