{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/forum/Post.vue?vue&type=style&index=0&lang=sass&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/forum/Post.vue","mtime":1600416049000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouYWN0aXZlZENvbG9yDQogIGNvbG9yOiByZWQ7DQo="},{"version":3,"sources":["Post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA","file":"Post.vue","sourceRoot":"src/components/forum","sourcesContent":["<template>\r\n  <q-card class=\"white q-my-md\">\r\n    <div class=\"row\">\r\n      <div class=\"col-auto\">\r\n        <!--头像-->\r\n        <div class=\"row q-mx-md q-my-md\">\r\n          <q-avatar size=\"100px\">\r\n            <img v-bind:src=\"headURL\" />\r\n          </q-avatar>\r\n        </div>\r\n        <!--昵称-->\r\n        <div class=\"row justify-center text-subtitle1\">\r\n          {{ nickName }}\r\n        </div>\r\n      </div>\r\n      <!--楼层内容-->\r\n      <div class=\"col q-mx-lg q-my-lg\">\r\n        <div class=\"row  text-body1\" style=\"word-break:break-all;word-wrap:break-word\">\r\n          {{ content }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row justify-end items-center\">\r\n      <!--点赞按钮-->\r\n      <div class=\"col-auto\">\r\n        <q-btn\r\n          v-if=\"floor === 1\"\r\n          :class=\"{ activedColor: thumbUp }\"\r\n          class=\"q-mx-sm\"\r\n          @click=\"$emit('evaluate', 1)\"\r\n          icon=\"thumb_up\"\r\n          flat\r\n          round\r\n        >\r\n        <!--点踩按钮-->\r\n          <div v-if=\"thumbUpNum !== 0\">{{ thumbUpNum }}</div>\r\n        </q-btn>\r\n        <q-btn\r\n          v-if=\"floor === 1\"\r\n          class=\"q-mx-sm\"\r\n          :class=\"{ activedColor: thumbDown }\"\r\n          @click=\"$emit('evaluate', 0)\"\r\n          icon=\"thumb_down\"\r\n          flat\r\n          round\r\n        />\r\n        <!--展开回复/收起回复-->\r\n        <q-btn class=\"q-mx-md\" @click=\"Expand\" :label=\"buttonText\" flat round>\r\n          <div v-if=\"floor !== 1 && replys.length > 0\">\r\n            ({{ replys.length }})\r\n          </div>\r\n        </q-btn>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n      <!--展开内容-->\r\n        <q-expansion-item\r\n          v-model=\"expanded\"\r\n          expand-separator\r\n          expand-icon-toggle\r\n          expand-icon-class=\"hidden\"\r\n          :label=\"floor + '楼 ' + date\"\r\n        >\r\n          <div v-if=\"floor !== 1\">\r\n          <!--回复-->\r\n            <div v-for=\"(display, i) in displays\" :key=\"i\">\r\n              <Reply\r\n                :nickName=\"display.nickName\"\r\n                :content=\"display.content\"\r\n                :date=\"display.date\"\r\n                @changeReplyPrefix=\"ChangePrefix\"\r\n              />\r\n            </div>\r\n            <q-tabs\r\n              v-if=\"replys.length > 3\"\r\n              inline-label\r\n              class=\"white q-mt-xs shadow-2\"\r\n            >\r\n              <!--回复分页-->\r\n              <q-tab\r\n                v-for=\"i in Math.ceil(replys.length / 3)\"\r\n                color=\"white\"\r\n                class=\"q-mx-xs\"\r\n                :key=\"i\"\r\n                :name=\"i\"\r\n                :label=\"i\"\r\n                @click=\"ShiftPage(i)\"\r\n              />\r\n            </q-tabs>\r\n            <!--回复文本框-->\r\n            <q-card class=\"white q-mt-xs justify-center\">\r\n              <div class=\"row justify-end\">\r\n                <div class=\"col-10\">\r\n                  <q-input\r\n                    outlined\r\n                    ref=\"reply\"\r\n                    v-model=\"replyContent\"\r\n                    :prefix=\"replyPrefix\"\r\n                  />\r\n                </div>\r\n                <div class=\"col-auto q-pr-sm q-pl-lg q-py-sm\">\r\n                  <q-btn\r\n                    class=\"q-mx-xs\"\r\n                    color=\"white\"\r\n                    text-color=\"black\"\r\n                    label=\"发表\"\r\n                    @click=\"\r\n                      $emit('publish', replyPrefix + replyContent, floor - 1, 1);replyPrefix='';replyContent=''\r\n                    \"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </q-card>\r\n          </div>\r\n        </q-expansion-item>\r\n      </div>\r\n    </div>\r\n  </q-card>\r\n</template>\r\n<script>\r\nimport Reply from \"./Reply.vue\";\r\nexport default {\r\n  name: \"Post\",\r\n  components: {\r\n    Reply,\r\n  },\r\n  props: {\r\n    headURL: {\r\n      type: String,\r\n      default: require(\"../../assets/boy-avatar.png\"),\r\n    },\r\n    nickName: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    content: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    floor: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    thumbUpNum: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    thumbUp: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    thumbDown: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    date: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    replys: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    userId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      expanded: false,\r\n      buttonText: \"回复\",\r\n      replyPrefix: \"\",\r\n      replyContent: \"\",\r\n      displays: [],\r\n    };\r\n  },\r\n  watch: {\r\n    replys() {\r\n      this.ShiftPage(1);\r\n    },\r\n  },\r\n  methods: {\r\n    //修改回复前缀\r\n    ChangePrefix(nickName) {\r\n      this.replyPrefix = \"回复@\" + nickName + \":\";\r\n      this.$refs.reply.focus();\r\n    },\r\n    //展开回复/收起回复\r\n    Expand() {\r\n      this.expanded = !this.expanded;\r\n      if (this.floor === 1) {\r\n        this.$emit(\"focusBottom\");\r\n        return;\r\n      }\r\n      if (this.expanded) {\r\n        this.buttonText = \"收起\";\r\n        this.$nextTick(() => {\r\n          this.$refs.reply.focus();\r\n        });\r\n      } else {\r\n        this.buttonText = \"回复\";\r\n        this.replyPrefix = \"\";\r\n      }\r\n    },\r\n    //切换回复分页\r\n    ShiftPage(index) {\r\n      this.displays = this.replys.slice((index - 1) * 3, index * 3);\r\n    },\r\n  },\r\n  mounted: function () {\r\n    this.ShiftPage(1);\r\n  },\r\n};\r\n</script>\r\n<style lang=\"sass\">\r\n.activedColor\r\n  color: red;\r\n</style>\r\n"]}]}