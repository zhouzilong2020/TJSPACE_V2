{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/courseInfo/CourseDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/components/courseInfo/CourseDetail.vue","mtime":1600412665000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb3Vyc2VTdGF0aXN0aWMgZnJvbSAiLi9Db3Vyc2VTdGF0aXN0aWMiOwppbXBvcnQgeyBjYW5NYWtlQ29tbWVudCB9IGZyb20gIi4uLy4uL3NlcnZpY2VzL2NvbW1lbnRTZXJ2aWNlIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDb3Vyc2VEZXRhaWwiLAogIGNvbXBvbmVudHM6IHsKICAgIENvdXJzZVN0YXRpc3RpYywKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgidXNlckluZm8iLCBbInVzZXJJbmZvIiwgInRva2VuIl0pLAogICAgb3BlblRpbWUoKSB7CiAgICAgIGxldCBpbmRleCA9IHRoaXMuY291cnNlSW5mby5zZWN0aW9uLmxlbmd0aCAtIDE7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5jb3Vyc2VJbmZvLnNlY3Rpb25baW5kZXhdLnllYXIgKwogICAgICAgIGAgJHt0aGlzLmNvdXJzZUluZm8uc2VjdGlvbltpbmRleF0uc2VtZXN0ZXIgPT0gMCA/ICLmmKUiIDogIueniyJ9YAogICAgICApOwogICAgfSwKICB9LAogIHByb3BzOiB7CiAgICBjb3Vyc2VJbmZvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0aXRsZTogIuaVsOaNruW6k+WOn+eQhuS4juW6lOeUqCIsCiAgICAgICAgICB0ZWFjaGVyOiAi6KKB5pe26YeRIiwKICAgICAgICAgIHRlYWNoZXJJZDogIjAwMDEiLAogICAgICAgICAgY291cnNlSWQ6ICI0MjAyNDQiLAogICAgICAgICAgc2VjdGlvbjogIjIwMjAg5pilIiwKICAgICAgICAgIGRlcGFydG1lbnQ6ICLova/ku7blrabpmaIiLAogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAogICAgY29tbWVudFN0YXRpc3RpYzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhdGg6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9USlUucG5nIiksCiAgICAgIGNhbk1ha2VDb21tZW50OiBmYWxzZSwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgYXN5bmMgY291cnNlSW5mbygpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5jb3Vyc2VJbmZvLnRlYWNoZXJpZCk7CiAgICAgIHZhciByZXNwID0gYXdhaXQgY2FuTWFrZUNvbW1lbnQoewogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLAogICAgICAgIHVzZXJJZDogdGhpcy51c2VySW5mby51c2VyaWQsCiAgICAgICAgdGVhY2hlcklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudGVhY2hlcklkLAogICAgICAgIGNvdXJzZUlkIDogdGhpcy4kcm91dGUucGFyYW1zLmNvdXJzZUlkCiAgICAgIH0pOwogICAgICBpZiAocmVzcC5zdGF0dXMpIHsKICAgICAgICB0aGlzLmNhbk1ha2VDb21tZW50ID0gcmVzcC5jYW5Qb3N0Q29tbWVudDsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNhbk1ha2VDb21tZW50KQogICAgICB9CiAgICB9LAogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHt9LAp9Owo="},{"version":3,"sources":["CourseDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseDetail.vue","sourceRoot":"src/components/courseInfo","sourcesContent":["<template>\n  <q-card elevated class=\"course-detail\">\n    <img :src=\"path\" class=\"course-detail-img\" />\n\n    <q-card-section horizontal>\n      <q-list>\n        <q-item>\n          <q-item-section avatar>\n            <q-icon color=\"primary\" name=\"local_library\" />\n          </q-item-section>\n          <q-item-section>\n            <q-item-label>课程名称</q-item-label>\n            <q-item-label caption>{{ courseInfo.title }}</q-item-label>\n          </q-item-section>\n        </q-item>\n\n        <q-item>\n          <q-item-section avatar>\n            <q-icon color=\"red\" name=\"people\" />\n          </q-item-section>\n\n          <q-item-section>\n            <q-item-label>授课教师</q-item-label>\n            <q-item-label caption>{{ courseInfo.teacher }}</q-item-label>\n          </q-item-section>\n        </q-item>\n\n        <q-item>\n          <q-item-section avatar>\n            <q-icon color=\"amber\" name=\"near_me\" />\n          </q-item-section>\n\n          <q-item-section>\n            <q-item-label>课程编号</q-item-label>\n            <q-item-label caption>{{ courseInfo.courseId }}</q-item-label>\n          </q-item-section>\n        </q-item>\n\n        <q-item>\n          <q-item-section avatar>\n            <q-icon color=\"green\" name=\"today\" />\n          </q-item-section>\n\n          <q-item-section>\n            <q-item-label>开课时间</q-item-label>\n            <q-item-label caption>{{ openTime }}</q-item-label>\n          </q-item-section>\n        </q-item>\n\n        <q-item>\n          <q-item-section avatar>\n            <q-icon color=\"grey\" name=\"place\" />\n          </q-item-section>\n          <q-item-section>\n            <q-item-label>开设学院</q-item-label>\n            <q-item-label caption>{{ courseInfo.department }}</q-item-label>\n          </q-item-section>\n        </q-item>\n      </q-list>\n    </q-card-section>\n\n    <q-card-section>\n      <course-statistic class=\"q-my-sm\" :commentStatistic=\"commentStatistic\" />\n      <q-btn\n        stretch\n        class=\"full-width btn gt-sm\"\n        color=\"primary\"\n        icon-right=\"comment\"\n        :disable=\"!canMakeComment\"\n        :to=\"{\n          name: 'MakeComment',\n          params: {\n            userId: this.userInfo.userid,\n            courseId: this.courseInfo.courseId,\n          },\n        }\"\n        label=\"撰写评论\"\n        unelevated\n      >\n        <q-tooltip content-class=\"bg-accent\">{{canMakeComment ? '现在就撰写你的评论吧！' : '你已经评价过该课程！'}}</q-tooltip>\n      </q-btn>\n\n      <q-btn\n        stretch\n        class=\"full-width btn lt-md\"\n        color=\"primary\"\n        icon-right=\"comment\"\n        :disable=\"!canMakeComment\"\n        :to=\"{\n          name: 'MakeComment',\n          params: {\n            teacherId: this.courseInfo.teacherId,\n            courseId: this.courseInfo.courseId,\n          },\n        }\"\n        unelevated\n      >\n        <q-tooltip content-class=\"bg-accent\">{{canMakeComment ? '现在就撰写你的评论吧！' : '你已经评价过该课程！'}}</q-tooltip>\n      </q-btn>\n\n    </q-card-section>\n  </q-card>\n</template>\n\n<script>\nimport CourseStatistic from \"./CourseStatistic\";\nimport { canMakeComment } from \"../../services/commentService\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"CourseDetail\",\n  components: {\n    CourseStatistic,\n  },\n  computed: {\n    ...mapState(\"userInfo\", [\"userInfo\", \"token\"]),\n    openTime() {\n      let index = this.courseInfo.section.length - 1;\n      return (\n        this.courseInfo.section[index].year +\n        ` ${this.courseInfo.section[index].semester == 0 ? \"春\" : \"秋\"}`\n      );\n    },\n  },\n  props: {\n    courseInfo: {\n      type: Object,\n      default: () => {\n        return {\n          title: \"数据库原理与应用\",\n          teacher: \"袁时金\",\n          teacherId: \"0001\",\n          courseId: \"420244\",\n          section: \"2020 春\",\n          department: \"软件学院\",\n        };\n      },\n    },\n    commentStatistic: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      path: require(\"../../assets/TJU.png\"),\n      canMakeComment: false,\n    };\n  },\n  watch: {\n    async courseInfo() {\n      console.log(this.courseInfo.teacherid);\n      var resp = await canMakeComment({\n        token: this.token,\n        userId: this.userInfo.userid,\n        teacherId: this.$route.params.teacherId,\n        courseId : this.$route.params.courseId\n      });\n      if (resp.status) {\n        this.canMakeComment = resp.canPostComment;\n        console.log(this.canMakeComment)\n      }\n    },\n  },\n  async mounted() {},\n};\n</script>\n\n<style scoped>\n.course-detail {\n  max-width: 200px;\n}\n.course-detail .course-detail-img {\n  max-width: 80px;\n  padding: 10px;\n  margin: 0 auto;\n}\n</style>\n"]}]}