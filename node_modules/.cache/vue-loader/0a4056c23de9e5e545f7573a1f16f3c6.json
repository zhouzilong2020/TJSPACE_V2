{"remainingRequest":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/Forum.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/src/pages/Forum.vue","mtime":1604068502715},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhouzilong/Desktop/2020-09-19-0005/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUG9zdCBmcm9tICIuLi9jb21wb25lbnRzL2ZvcnVtL1Bvc3QiOw0KaW1wb3J0IHsNCiAgICBtYXBTdGF0ZQ0KfSBmcm9tICJ2dWV4IjsNCmltcG9ydCB7DQogICAgUmVxdWVzdENhbmNlbCxHZXRQb3N0LEdldFJlcGx5LFBvc3RSZXBseSxDYW5FdmFsdWF0ZSxFdmFsdWF0ZSxHZXRQb3N0cyxDYW5jZWxFdmFsdWF0aW8sDQp9IGZyb20gIi4uL3NlcnZpY2VzL2ZvcnVtIg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJGb3J1bSIsDQogICAgY29tcG9uZW50czogew0KICAgICAgICBQb3N0LA0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHBvc3RJZDogIiIsDQogICAgICAgICAgICB0aXRsZTogIiIsDQogICAgICAgICAgICBwb3N0RGF0YToge30sDQogICAgICAgICAgICByZXBseXNEYXRhOiBbXSwNCiAgICAgICAgICAgIG1hc3RlckRhdGE6IFtdLA0KICAgICAgICAgICAgcmVjb21tZW5kRGF0YTogW10sDQogICAgICAgICAgICBkaXNwbGF5czogW10sDQogICAgICAgICAgICBtYXhQYWdlOiAxLA0KICAgICAgICAgICAgZWRpdG9yQ29udGVudDogIiIsDQogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgICAgICAgIHRvdGFsRmxvb3I6IDEsDQogICAgICAgICAgICB0aHVtYlVwOiBmYWxzZSwNCiAgICAgICAgICAgIHRodW1iRG93bjogZmFsc2UsDQogICAgICAgICAgICB0aHVtYlVwTnVtOiAwLA0KICAgICAgICAgICAgb25seU1hc3RlcjogZmFsc2UsDQogICAgICAgICAgICBvbmx5TWFzdGVyVGV4dDogIuWPqueci+alvOS4uyIsDQogICAgICAgICAgICBqdW1wOiBmYWxzZQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwU3RhdGUoInVzZXJJbmZvIiwgWyJ1c2VySW5mbyIsICJ0b2tlbiJdKSwNCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAgICRyb3V0ZSgpIHsgICAgICAgDQogICAgICAgICAgICB0aGlzLnBvc3RJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wb3N0SWQ7DQogICAgICAgICAgICB0aGlzLkxvYWQoKSAgICAgICAgDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy/liqDovb3lv4XopoHmlbDmja4NCiAgICAgICAgTG9hZCgpIHsNCiAgICAgICAgICAgIHRoaXMuanVtcCA9IHRydWU7DQogICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oew0KICAgICAgICAgICAgICAgIHRvcDogMA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMucmVwbHlzRGF0YSA9IFtdOw0KICAgICAgICAgICAgdGhpcy5tYXN0ZXJEYXRhID0gW107DQogICAgICAgICAgICAvL+WKoOi9veW4luWtkGlk44CB5Zue5aSNaWQNCiAgICAgICAgICAgIEdldFBvc3Qoew0KICAgICAgICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SWQNCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9IHJlc3BvbnNlLmRhdGExWzBdLnRpdGxlOw0KICAgICAgICAgICAgICAgIHRoaXMudG90YWxGbG9vciA9IHJlc3BvbnNlLmRhdGExWzBdLmZsb29yOw0KICAgICAgICAgICAgICAgIHRoaXMudGh1bWJVcE51bSA9IHJlc3BvbnNlLmRhdGExWzBdLnVzZWZ1bG51bTsNCiAgICAgICAgICAgICAgICB0aGlzLnBvc3REYXRhID0gew0KICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHJlc3BvbnNlLmRhdGExWzBdLnVzZXJpZCwNCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2UuZGF0YTFbMF0uY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZGF0YTFbMF0uZGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgbmlja05hbWU6IHJlc3BvbnNlLmRhdGEyLA0KICAgICAgICAgICAgICAgICAgICByZXBseXM6IFtdLA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YTMuc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoYS5mbG9vciAhPT0gYi5mbG9vcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmxvb3IgLSBiLmZsb29yOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudHlwZSAtIGIudHlwZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEzLmZvckVhY2goKGRhdGEpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseXNEYXRhLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5SWQ6IGRhdGEucmVwbHlJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrTmFtZTogZGF0YS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5czogW10sDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbHlzRGF0YVtkYXRhLmZsb29yIC0gMV0ucmVwbHlzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5SWQ6IGRhdGEucmVwbHlJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrTmFtZTogZGF0YS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcGx5c0RhdGEuZm9yRWFjaCgoZGF0YSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5uaWNrTmFtZSA9PSB0aGlzLnBvc3REYXRhLm5pY2tOYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hc3RlckRhdGEucHVzaChkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMubWF4UGFnZSA9IE1hdGguY2VpbCgodGhpcy5yZXBseXNEYXRhLmxlbmd0aCArIDEpIC8gMTApOw0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOw0KICAgICAgICAgICAgICAgIHRoaXMuU2hpZnRQYWdlKCk7DQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpPT57DQogICAgICAgICAgICAgICAgaWYoZXJyb3IubWVzc2FnZSE9J1RpbWVPdXQnKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9CQlNIb21lcGFnZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAvL+WKoOi9veeCuei1nuaVsOaNrg0KICAgICAgICAgICAgQ2FuRXZhbHVhdGUoew0KICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySW5mby51c2VyaWQsDQogICAgICAgICAgICAgICAgcG9zdElkOiB0aGlzLnBvc3RJZCwNCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5jYW5FdmFsdWF0ZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRodW1iVXAgPSBCb29sZWFuKHJlc3BvbnNlLnR5cGUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMudGh1bWJEb3duID0gIXRoaXMudGh1bWJVcA0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGh1bWJVcCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRodW1iRG93biA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8v5YiH5o2i5YiG6aG1DQogICAgICAgIFNoaWZ0UGFnZSgpIHsNCiAgICAgICAgICAgIHRoaXMuanVtcCA9IHRydWU7DQogICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oew0KICAgICAgICAgICAgICAgIHRvcDogMA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHZhciB0ZW1wID0gW107DQogICAgICAgICAgICB2YXIgaW5kZXggPSAwOw0KICAgICAgICAgICAgdmFyIGRhdGE7DQogICAgICAgICAgICB2YXIgZnVsbERhdGE7DQogICAgICAgICAgICBpZiAoIXRoaXMub25seU1hc3Rlcikgew0KICAgICAgICAgICAgICAgIGZ1bGxEYXRhID0gdGhpcy5yZXBseXNEYXRhOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBmdWxsRGF0YSA9IHRoaXMubWFzdGVyRGF0YTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPT0gMSkgew0KICAgICAgICAgICAgICAgIHRlbXBbaW5kZXhdID0gew0KICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMucG9zdERhdGEudXNlcklkLA0KICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvc3REYXRhLmNvbnRlbnQsDQogICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMucG9zdERhdGEuZGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgbmlja05hbWU6IHRoaXMucG9zdERhdGEubmlja05hbWUsDQogICAgICAgICAgICAgICAgICAgIHJlcGx5czogW10sDQogICAgICAgICAgICAgICAgICAgIGZsb29yOjENCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIGluZGV4Kys7DQogICAgICAgICAgICAgICAgZGF0YSA9IGZ1bGxEYXRhLnNsaWNlKDAsIDkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBkYXRhID0gZnVsbERhdGEuc2xpY2UoDQogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgKiAxMCAtIDExLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlICogMTAgLSAxDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciByZXBseUlkcyA9ICIiOw0KICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChyZXBseSkgPT4gew0KICAgICAgICAgICAgICAgIHJlcGx5SWRzICs9IHJlcGx5LnJlcGx5SWQgKyAiLCI7DQogICAgICAgICAgICAgICAgcmVwbHkucmVwbHlzLmZvckVhY2goKHJlcGx5VG9SZXBseSkgPT4gew0KICAgICAgICAgICAgICAgICAgICByZXBseUlkcyArPSByZXBseVRvUmVwbHkucmVwbHlJZCArICIsIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmVwbHlJZHMgPSByZXBseUlkcy5zbGljZSgwLCAtMSk7DQogICAgICAgICAgICAvL+WKoOi9veivpemhteivpue7huaVsOaNrg0KICAgICAgICAgICAgR2V0UmVwbHkoew0KICAgICAgICAgICAgICAgIHN0cjogcmVwbHlJZHMNCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgdmFyIHJlcGx5SWRNYXAgPSBbXTsNCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goKHJlcGx5KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHJlcGx5SWRNYXBbcmVwbHlbMF0ucmVwbHlpZF0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHJlcGx5WzBdLnVzZXJpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlcGx5WzBdLmNvbnRlbnQsDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiByZXBseVswXS5kYXRlLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3I6IHJlcGx5WzBdLmZsb29yDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChyZXBseSkgPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVwbHlEYXRhID0gcmVwbHlJZE1hcFtyZXBseS5yZXBseUlkXQ0KICAgICAgICAgICAgICAgICAgICB0ZW1wW2luZGV4XSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogcmVwbHlEYXRhLnVzZXJJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlcGx5RGF0YS5jb250ZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVwbHlEYXRhLmRhdGUsDQogICAgICAgICAgICAgICAgICAgICAgICBuaWNrTmFtZTogcmVwbHkubmlja05hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICByZXBseXM6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3I6cmVwbHlEYXRhLmZsb29yKzENCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgcmVwbHkucmVwbHlzLmZvckVhY2goKHJlcGx5VG9SZXBseSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGx5VG9SZXBseURhdGEgPSByZXBseUlkTWFwW3JlcGx5VG9SZXBseS5yZXBseUlkXQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpbmRleF0ucmVwbHlzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogcmVwbHlUb1JlcGx5RGF0YS51c2VySWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcmVwbHlUb1JlcGx5RGF0YS5jb250ZW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHJlcGx5VG9SZXBseURhdGEuZGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrTmFtZTogcmVwbHlUb1JlcGx5Lm5pY2tOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB0ZW1wW2luZGV4XS5yZXBseXMuc29ydChmdW5jdGlvbiAoDQogICAgICAgICAgICAgICAgICAgICAgICBhLA0KICAgICAgICAgICAgICAgICAgICAgICAgYg0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmRhdGUgPiBiLmRhdGUgPyAxIDogLTE7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBpbmRleCsrOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheXMgPSB0ZW1wLnNsaWNlKDAsIGluZGV4KQ0KICAgICAgICAgICAgfSkuY2F0Y2goKCk9PnsNCiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlzID0gdGVtcC5zbGljZSgwLCBpbmRleCkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8v5Y+R6KGo5Zue5aSNDQogICAgICAgIFB1Ymxpc2goY29udGVudCwgZmxvb3IsIHR5cGUpIHsNCiAgICAgICAgICAgIFBvc3RSZXBseSh7DQogICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCwNCiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlckluZm8udXNlcmlkLA0KICAgICAgICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SWQsDQogICAgICAgICAgICAgICAgZmxvb3I6IGZsb29yLA0KICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsDQogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7DQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflm57luJbmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2NlbnRlcicsDQogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6ICcxMDAwJw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMuTG9hZCgpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL+i/m+ihjOeCuei1ng0KICAgICAgICBEb0V2YWx1YXRlKHR5cGUpIHsNCiAgICAgICAgICAgIEV2YWx1YXRlKHsNCiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlckluZm8udXNlcmlkLA0KICAgICAgICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SWQsDQogICAgICAgICAgICAgICAgdHlwZTogdHlwZQ0KICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRodW1iVXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aHVtYlVwTnVtKys7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRodW1iRG93biA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/moLnmja7ngrnotZ7mg4XlhrXngrnotZ7miJblj5bmtojngrnotZ4NCiAgICAgICAgQ2hhbmdlRXZhbHVhdGUodHlwZSkgew0KICAgICAgICAgICAgQ2FuRXZhbHVhdGUoew0KICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySW5mby51c2VyaWQsDQogICAgICAgICAgICAgICAgcG9zdElkOiB0aGlzLnBvc3RJZCwNCiAgICAgICAgICAgIH0pLnRoZW4oKGV2YWx1YXRlSW5mbykgPT4gew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgIWV2YWx1YXRlSW5mby5jYW5FdmFsdWF0ZSB8fA0KICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZUluZm8udHlwZSAhPT0gdHlwZQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBDYW5jZWxFdmFsdWF0aW9uKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySW5mby51c2VyaWQsDQogICAgICAgICAgICAgICAgICAgICAgICBwb3N0SWQ6IHRoaXMucG9zdElkLA0KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmFsdWF0ZUluZm8udHlwZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRodW1iVXAgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aHVtYlVwTnVtLS07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aHVtYkRvd24gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZhbHVhdGVJbmZvLnR5cGUgIT09IHR5cGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkRvRXZhbHVhdGUodHlwZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuRG9FdmFsdWF0ZSh0eXBlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8v5YiH5o2i5Y+q55yL5qW85Li75oiW5Y+W5raI5Y+q55yL5qW85Li7DQogICAgICAgIE9ubHlNYXN0ZXIoKSB7DQogICAgICAgICAgICB0aGlzLm9ubHlNYXN0ZXIgPSAhdGhpcy5vbmx5TWFzdGVyOw0KICAgICAgICAgICAgaWYgKHRoaXMub25seU1hc3Rlcikgew0KICAgICAgICAgICAgICAgIHRoaXMubWF4UGFnZSA9IE1hdGguY2VpbCgodGhpcy5tYXN0ZXJEYXRhLmxlbmd0aCArIDEpIC8gMTApOw0KICAgICAgICAgICAgICAgIHRoaXMub25seU1hc3RlclRleHQgPSAi5Y+W5raI5Y+q55yL5qW85Li7IjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5tYXhQYWdlID0gTWF0aC5jZWlsKCh0aGlzLnJlcGx5c0RhdGEubGVuZ3RoICsgMSkgLyAxMCk7DQogICAgICAgICAgICAgICAgdGhpcy5vbmx5TWFzdGVyVGV4dCA9ICLlj6rnnIvmpbzkuLsiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7DQogICAgICAgICAgICB0aGlzLlNoaWZ0UGFnZSgpOw0KICAgICAgICB9LA0KICAgICAgICAvL+mhtemdoua7muWKqOiHs+W6lemDqA0KICAgICAgICBUb0JvdHRvbSgpIHsNCiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7DQogICAgICAgICAgICAgICAgdG9wOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LA0KICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAic21vb3RoIg0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8v6aG16Z2i5rua5Yqo6Iez6aG26YOoDQogICAgICAgIFRvVG9wKCkgew0KICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHsNCiAgICAgICAgICAgICAgICB0b3A6IDAsDQogICAgICAgICAgICAgICAgYmVoYXZpb3I6ICJzbW9vdGgiDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/luJblrZDmoIfpopjlkozmjqjojZDmoI/pmo/pobXpnaLmu5rliqgNCiAgICAgICAgRm9sbG93KHBvc2l0aW9uKSB7DQogICAgICAgICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGl0bGUiKTsNCiAgICAgICAgICAgIHZhciB0b1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b1RvcCIpOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmp1bXAgJiYNCiAgICAgICAgICAgICAgICBkb2N1bWVudA0KICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZGVyIilbMF0NCiAgICAgICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCJjbGFzcyIpDQogICAgICAgICAgICAgICAgLmluZGV4T2YoInEtaGVhZGVyLS1oaWRkZW4iKSAhPSAtMQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdGl0bGUuc3R5bGUudG9wID0gcG9zaXRpb24gLSA1MCArICJweCI7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRpdGxlLnN0eWxlLnRvcCA9IHBvc2l0aW9uICsgInB4IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBkb2N1bWVudA0KICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZm9vdGVyIilbMF0NCiAgICAgICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCJjbGFzcyIpDQogICAgICAgICAgICAgICAgLmluZGV4T2YoInEtZm9vdGVyLS1oaWRkZW4iKSAhPSAtMQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdG9Ub3Auc3R5bGUudG9wID0NCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gKw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0NCiAgICAgICAgICAgICAgICAgICAgdG9Ub3Aub2Zmc2V0SGVpZ2h0IC0NCiAgICAgICAgICAgICAgICAgICAgNTAgKw0KICAgICAgICAgICAgICAgICAgICAicHgiOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0b1RvcC5zdHlsZS50b3AgPQ0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiArDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLQ0KICAgICAgICAgICAgICAgICAgICB0b1RvcC5vZmZzZXRIZWlnaHQgLQ0KICAgICAgICAgICAgICAgICAgICAxMDAgKw0KICAgICAgICAgICAgICAgICAgICAicHgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5qdW1wID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLnBvc3RJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wb3N0SWQNCiAgICAgICAgdGhpcy5Mb2FkKCk7DQogICAgICAgIC8v5Yqg6L295o6o6I2Q5qCP5pWw5o2uDQogICAgICAgIEdldFBvc3RzKHsNCiAgICAgICAgICAgIG9yZGVyVHlwZTogMywNCiAgICAgICAgICAgIHN0YXJ0UG9zaXRpb246IDAsDQogICAgICAgICAgICB1c2VySWQ6ICIiLA0KICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgcmVzcG9uc2UucG9zdHMuc2xpY2UoMCwgMTApLmZvckVhY2goKHBvc3QpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlY29tbWVuZERhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBwb3N0LnRpdGxlLA0KICAgICAgICAgICAgICAgICAgICBwb3N0SWQ6IHBvc3QucG9zdElkLA0KICAgICAgICAgICAgICAgICAgICBjb2xvcjogImJhY2tncm91bmQ6I0MwQzBDMCIsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRyeXsNCiAgICAgICAgICAgICAgICB0aGlzLnJlY29tbWVuZERhdGFbMF1bImNvbG9yIl0gPSAiYmFja2dyb3VuZDojRkZENzAwIjsNCiAgICAgICAgICAgICAgICB0aGlzLnJlY29tbWVuZERhdGFbMV1bImNvbG9yIl0gPSAiYmFja2dyb3VuZDojRjVGNUY1IjsNCiAgICAgICAgICAgICAgICB0aGlzLnJlY29tbWVuZERhdGFbMl1bImNvbG9yIl0gPSAiYmFja2dyb3VuZDojRDI2OTFFIjsNCiAgICAgICAgICAgIH1jYXRjaChlcnJvcil7DQogICAgICAgICAgICAgICAgLyplbXB0eSovDQogICAgICAgICAgICB9ICAgDQogICAgICAgIH0pDQogICAgfSwNCiAgICBmaWx0ZXJzOiB7DQogICAgICAgIC8v5oiq5pat5biW5a2Q5qCH6aKYDQogICAgICAgIGVsbGlwc2lzKHN0cmluZywgbGVuZ3RoKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuY2hhckNvZGVBdChpKSA+IDEyNyB8fCBzdHJpbmcuY2hhckNvZGVBdChpKSA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IDI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoMCwgaSAtIDEpICsgIi4uLiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHN0cmluZzsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGRlc3Ryb3llZCgpIHsNCiAgICAgICAgLy/liIfmjaLpobXpnaLml7blj5bmtojor7fmsYINCiAgICAgICAgUmVxdWVzdENhbmNlbCgpDQogICAgICAgIGlmICh0aGlzLnRpbWVyICE9PSB2b2lkIDApIHsNCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKQ0KICAgICAgICAgICAgdGhpcy4kcS5sb2FkaW5nLmhpZGUoKQ0KICAgICAgICB9DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["Forum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Forum.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n<div class=\"row justify-center\">\r\n    <div class=\"col-auto\">\r\n        <q-card class=\"q-ml-xs\" style=\"width: 230px\" />\r\n    </div>\r\n    <div class=\"col-auto\">\r\n        <q-card class=\"row q-mb-xs z-top\" style=\"width: 750px\" id=\"title\" v-scroll=\"Follow\">\r\n            <!--帖子标题-->\r\n            <q-banner class=\"col white\">\r\n                <div class=\"text-h6\">{{ title | ellipsis(60) }}</div>\r\n                <q-tooltip content-class=\"text-h6\">{{ title }}</q-tooltip>\r\n            </q-banner>\r\n            <!--只看楼主按钮-->\r\n            <div class=\"col-auto\">\r\n                <q-btn class=\"column-auto q-ma-md shadow-2\" flat dense size=\"md\" color=\"white\" text-color=\"black\" :label=\"onlyMasterText\" @click=\"OnlyMaster()\" />\r\n            </div>\r\n        </q-card>\r\n        <div style=\"width: 750px\">\r\n             <!--帖子楼层-->\r\n            <div v-for=\"(post, i) in displays\" :key=\"i\">\r\n                <Post :userId=\"post.userId\" :nickName=\"post.nickName\" :thumbUpNum=\"thumbUpNum\" :thumbUp=\"thumbUp\" :thumbDown=\"thumbDown\" :date=\"post.date\" :floor=\"post.floor\" :content=\"post.content\" :replys=\"post.replys\" @focusBottom=\"ToBottom\" @publish=\"Publish\" @evaluate=\"ChangeEvaluate\" />\r\n            </div>\r\n             <!--回复文本框-->\r\n            <q-card class=\"q-my-lg\">\r\n                <q-editor ref=\"bottom\" v-model=\"editorContent\" min-height=\"5rem\" />\r\n                <div class=\"row justify-end\">\r\n                    <q-btn class=\"q-ma-sm\" text-color=\"black\" label=\"发表\" @click=\"Publish(editorContent, totalFloor + 1, 0);editorContent=''\" />\r\n                </div>\r\n            </q-card>\r\n             <!--分页-->\r\n            <div class=\"row justify-start q-pb-lg\">\r\n                <q-pagination v-model=\"currentPage\" @click=\"ShiftPage()\" :max=\"maxPage\" :direction-links=\"true\"></q-pagination>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-auto\">\r\n         <!--推荐栏-->\r\n        <q-card class=\"q-ml-xs\" id=\"toTop\" style=\"width: 230px\">\r\n            <q-card class=\"text-weight-bold q-pt-sm q-ml-md\"> 最新推荐 </q-card>\r\n            <div v-for=\"(recommend, i) in recommendData\" :key=\"i\">\r\n                <template>\r\n                    <div class=\"row items-center\">\r\n                        <q-card class=\"col-auto q-ma-xs q-px-sm q-py-xs\" flat :style=\"recommend.color\">\r\n                            {{ i + 1 }}\r\n                        </q-card>\r\n                        <router-link class=\"col-auto\" style=\"text-decoration: none\" :to=\"{\r\n                  name: 'Forum',\r\n                  params: { postId: recommend.postId },\r\n                }\">\r\n                            {{ recommend.title | ellipsis(24) }}\r\n                            <q-tooltip>{{ recommend.title }}</q-tooltip>\r\n                        </router-link>\r\n                    </div>\r\n                </template>\r\n            </div>\r\n             <!--返回顶部按钮-->\r\n            <q-btn @click=\"ToTop\" class=\"q-py-sm\" style=\"width: 230px\" color=\"black\" icon=\"keyboard_arrow_up\" flat>\r\n                <q-tooltip>返回顶部</q-tooltip>\r\n            </q-btn>\r\n        </q-card>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Post from \"../components/forum/Post\";\r\nimport {\r\n    mapState\r\n} from \"vuex\";\r\nimport {\r\n    RequestCancel,GetPost,GetReply,PostReply,CanEvaluate,Evaluate,GetPosts,CancelEvaluatio,\r\n} from \"../services/forum\"\r\nexport default {\r\n    name: \"Forum\",\r\n    components: {\r\n        Post,\r\n    },\r\n    data() {\r\n        return {\r\n            postId: \"\",\r\n            title: \"\",\r\n            postData: {},\r\n            replysData: [],\r\n            masterData: [],\r\n            recommendData: [],\r\n            displays: [],\r\n            maxPage: 1,\r\n            editorContent: \"\",\r\n            currentPage: 1,\r\n            totalFloor: 1,\r\n            thumbUp: false,\r\n            thumbDown: false,\r\n            thumbUpNum: 0,\r\n            onlyMaster: false,\r\n            onlyMasterText: \"只看楼主\",\r\n            jump: false\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState(\"userInfo\", [\"userInfo\", \"token\"]),\r\n    },\r\n    watch: {\r\n        $route() {       \r\n            this.postId = this.$route.params.postId;\r\n            this.Load()        \r\n        }\r\n    },\r\n    methods: {\r\n        //加载必要数据\r\n        Load() {\r\n            this.jump = true;\r\n            window.scrollTo({\r\n                top: 0\r\n            })\r\n            this.replysData = [];\r\n            this.masterData = [];\r\n            //加载帖子id、回复id\r\n            GetPost({\r\n                postId: this.postId\r\n            }).then((response) => {\r\n                this.title = response.data1[0].title;\r\n                this.totalFloor = response.data1[0].floor;\r\n                this.thumbUpNum = response.data1[0].usefulnum;\r\n                this.postData = {\r\n                    userId: response.data1[0].userid,\r\n                    content: response.data1[0].content,\r\n                    date: response.data1[0].date,\r\n                    nickName: response.data2,\r\n                    replys: [],\r\n                };\r\n                response.data3.sort((a, b) => {\r\n                    if (a.floor !== b.floor) {\r\n                        return a.floor - b.floor;\r\n                    } else {\r\n                        return a.type - b.type;\r\n                    }\r\n                });\r\n                response.data3.forEach((data) => {\r\n                    if (data.type === 0) {\r\n                        this.replysData.push({\r\n                            replyId: data.replyId,\r\n                            nickName: data.name,\r\n                            replys: [],\r\n                        });\r\n                    } else {\r\n                        this.replysData[data.floor - 1].replys.push({\r\n                            replyId: data.replyId,\r\n                            nickName: data.name,\r\n                        });\r\n                    }\r\n                });\r\n                this.replysData.forEach((data) => {\r\n                    if (data.nickName == this.postData.nickName) {\r\n                        this.masterData.push(data);\r\n                    }\r\n                });\r\n                this.maxPage = Math.ceil((this.replysData.length + 1) / 10);\r\n                this.currentPage = 1;\r\n                this.ShiftPage();\r\n            }).catch((error)=>{\r\n                if(error.message!='TimeOut'){\r\n                    this.$router.push(\"/BBSHomepage\");\r\n                }\r\n            })\r\n            //加载点赞数据\r\n            CanEvaluate({\r\n                userId: this.userInfo.userid,\r\n                postId: this.postId,\r\n            }).then((response) => {\r\n                if (!response.canEvaluate) {\r\n                    this.thumbUp = Boolean(response.type)\r\n                    this.thumbDown = !this.thumbUp\r\n                } else {\r\n                    this.thumbUp = false;\r\n                    this.thumbDown = false;\r\n                }\r\n            })\r\n        },\r\n        //切换分页\r\n        ShiftPage() {\r\n            this.jump = true;\r\n            window.scrollTo({\r\n                top: 0\r\n            })\r\n            var temp = [];\r\n            var index = 0;\r\n            var data;\r\n            var fullData;\r\n            if (!this.onlyMaster) {\r\n                fullData = this.replysData;\r\n            } else {\r\n                fullData = this.masterData;\r\n            }\r\n\r\n            if (this.currentPage == 1) {\r\n                temp[index] = {\r\n                    userId: this.postData.userId,\r\n                    content: this.postData.content,\r\n                    date: this.postData.date,\r\n                    nickName: this.postData.nickName,\r\n                    replys: [],\r\n                    floor:1\r\n                };\r\n                index++;\r\n                data = fullData.slice(0, 9);\r\n            } else {\r\n                data = fullData.slice(\r\n                    this.currentPage * 10 - 11,\r\n                    this.currentPage * 10 - 1\r\n                );\r\n            }\r\n            var replyIds = \"\";\r\n            data.forEach((reply) => {\r\n                replyIds += reply.replyId + \",\";\r\n                reply.replys.forEach((replyToReply) => {\r\n                    replyIds += replyToReply.replyId + \",\";\r\n                });\r\n            });\r\n            replyIds = replyIds.slice(0, -1);\r\n            //加载该页详细数据\r\n            GetReply({\r\n                str: replyIds\r\n            }).then((response) => {\r\n                var replyIdMap = [];\r\n                response.data.forEach((reply) => {\r\n                    replyIdMap[reply[0].replyid] = {\r\n                        userId: reply[0].userid,\r\n                        content: reply[0].content,\r\n                        date: reply[0].date,\r\n                        floor: reply[0].floor\r\n                    };\r\n                });\r\n                data.forEach((reply) => {\r\n                    var replyData = replyIdMap[reply.replyId]\r\n                    temp[index] = {\r\n                        userId: replyData.userId,\r\n                        content: replyData.content,\r\n                        date: replyData.date,\r\n                        nickName: reply.nickName,\r\n                        replys: [],\r\n                        floor:replyData.floor+1\r\n                    };\r\n                    reply.replys.forEach((replyToReply) => {\r\n                        var replyToReplyData = replyIdMap[replyToReply.replyId]\r\n                        temp[index].replys.push({\r\n                            userId: replyToReplyData.userId,\r\n                            content: replyToReplyData.content,\r\n                            date: replyToReplyData.date,\r\n                            nickName: replyToReply.nickName,\r\n                        });\r\n                    });\r\n                    temp[index].replys.sort(function (\r\n                        a,\r\n                        b\r\n                    ) {\r\n                        return a.date > b.date ? 1 : -1;\r\n                    });\r\n                    index++;\r\n                });\r\n                this.displays = temp.slice(0, index)\r\n            }).catch(()=>{\r\n                this.displays = temp.slice(0, index)\r\n            })\r\n        },\r\n        //发表回复\r\n        Publish(content, floor, type) {\r\n            PostReply({\r\n                content: content,\r\n                userId: this.userInfo.userid,\r\n                postId: this.postId,\r\n                floor: floor,\r\n                type: type,\r\n            }).then(() => {\r\n                this.$q.notify({\r\n                    message: '回帖成功',\r\n                    position: 'center',\r\n                    timeout: '1000'\r\n                });\r\n                this.Load()\r\n            })\r\n        },\r\n        //进行点赞\r\n        DoEvaluate(type) {\r\n            Evaluate({\r\n                userId: this.userInfo.userid,\r\n                postId: this.postId,\r\n                type: type\r\n            }).then((response) => {\r\n                if (response.status) {\r\n                    if (type) {\r\n                        this.thumbUp = true;\r\n                        this.thumbUpNum++;\r\n                    } else {\r\n                        this.thumbDown = true;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        //根据点赞情况点赞或取消点赞\r\n        ChangeEvaluate(type) {\r\n            CanEvaluate({\r\n                userId: this.userInfo.userid,\r\n                postId: this.postId,\r\n            }).then((evaluateInfo) => {\r\n                if (\r\n                    !evaluateInfo.canEvaluate ||\r\n                    evaluateInfo.type !== type\r\n                ) {\r\n                    CancelEvaluation({\r\n                        userId: this.userInfo.userid,\r\n                        postId: this.postId,\r\n                    }).then((response) => {\r\n                        if (response.status) {\r\n                            if (evaluateInfo.type) {\r\n                                this.thumbUp = false;\r\n                                this.thumbUpNum--;\r\n                            } else {\r\n                                this.thumbDown = false;\r\n                            }\r\n                        }\r\n                        if (evaluateInfo.type !== type) {\r\n                            this.DoEvaluate(type)\r\n                        }\r\n\r\n                    })\r\n                } else {\r\n                    this.DoEvaluate(type)\r\n                }\r\n            })\r\n        },\r\n        //切换只看楼主或取消只看楼主\r\n        OnlyMaster() {\r\n            this.onlyMaster = !this.onlyMaster;\r\n            if (this.onlyMaster) {\r\n                this.maxPage = Math.ceil((this.masterData.length + 1) / 10);\r\n                this.onlyMasterText = \"取消只看楼主\";\r\n            } else {\r\n                this.maxPage = Math.ceil((this.replysData.length + 1) / 10);\r\n                this.onlyMasterText = \"只看楼主\";\r\n            }\r\n            this.currentPage = 1;\r\n            this.ShiftPage();\r\n        },\r\n        //页面滚动至底部\r\n        ToBottom() {\r\n            window.scrollTo({\r\n                top: document.documentElement.offsetHeight,\r\n                behavior: \"smooth\"\r\n            });\r\n        },\r\n        //页面滚动至顶部\r\n        ToTop() {\r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior: \"smooth\"\r\n            });\r\n        },\r\n        //帖子标题和推荐栏随页面滚动\r\n        Follow(position) {\r\n            var title = document.getElementById(\"title\");\r\n            var toTop = document.getElementById(\"toTop\");\r\n            if (!this.jump &&\r\n                document\r\n                .getElementsByTagName(\"header\")[0]\r\n                .getAttribute(\"class\")\r\n                .indexOf(\"q-header--hidden\") != -1\r\n            ) {\r\n                title.style.top = position - 50 + \"px\";\r\n            } else {\r\n                title.style.top = position + \"px\";\r\n            }\r\n            if (\r\n                document\r\n                .getElementsByTagName(\"footer\")[0]\r\n                .getAttribute(\"class\")\r\n                .indexOf(\"q-footer--hidden\") != -1\r\n            ) {\r\n                toTop.style.top =\r\n                    position +\r\n                    document.documentElement.clientHeight -\r\n                    toTop.offsetHeight -\r\n                    50 +\r\n                    \"px\";\r\n            } else {\r\n                toTop.style.top =\r\n                    position +\r\n                    document.documentElement.clientHeight -\r\n                    toTop.offsetHeight -\r\n                    100 +\r\n                    \"px\";\r\n            }\r\n            this.jump = false;\r\n        },\r\n    },\r\n    mounted() {\r\n        this.postId = this.$route.params.postId\r\n        this.Load();\r\n        //加载推荐栏数据\r\n        GetPosts({\r\n            orderType: 3,\r\n            startPosition: 0,\r\n            userId: \"\",\r\n        }).then((response) => {\r\n            response.posts.slice(0, 10).forEach((post) => {\r\n                this.recommendData.push({\r\n                    title: post.title,\r\n                    postId: post.postId,\r\n                    color: \"background:#C0C0C0\",\r\n                });\r\n            });\r\n            try{\r\n                this.recommendData[0][\"color\"] = \"background:#FFD700\";\r\n                this.recommendData[1][\"color\"] = \"background:#F5F5F5\";\r\n                this.recommendData[2][\"color\"] = \"background:#D2691E\";\r\n            }catch(error){\r\n                /*empty*/\r\n            }   \r\n        })\r\n    },\r\n    filters: {\r\n        //截断帖子标题\r\n        ellipsis(string, length) {\r\n            for (var i = 0; i < string.length; i++) {\r\n                if (string.charCodeAt(i) > 127 || string.charCodeAt(i) < 0) {\r\n                    length -= 2;\r\n                } else {\r\n                    length -= 1;\r\n                }\r\n                if (length < 0) {\r\n                    return string.slice(0, i - 1) + \"...\";\r\n                }\r\n            }\r\n            return string;\r\n        },\r\n    },\r\n    destroyed() {\r\n        //切换页面时取消请求\r\n        RequestCancel()\r\n        if (this.timer !== void 0) {\r\n            clearTimeout(this.timer)\r\n            this.$q.loading.hide()\r\n        }\r\n    }\r\n};\r\n</script>\r\n"]}]}